# æ—¥å¿—ç›‘æ§

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**
- [config/logging.toml](file://config/logging.toml)
- [config/logging_docker.toml](file://config/logging_docker.toml)
- [tradingagents/utils/logging_init.py](file://tradingagents/utils/logging_init.py)
- [tradingagents/utils/logging_manager.py](file://tradingagents/utils/logging_manager.py)
- [tradingagents/utils/tool_logging.py](file://tradingagents/utils/tool_logging.py)
- [web/utils/user_activity_logger.py](file://web/utils/user_activity_logger.py)
- [scripts/test_docker_logging.py](file://scripts/test_docker_logging.py)
- [scripts/log_analyzer.py](file://scripts/log_analyzer.py)
- [examples/simple_analysis_demo.py](file://examples/simple_analysis_demo.py)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
3. [é…ç½®æ–‡ä»¶è¯¦è§£](#é…ç½®æ–‡ä»¶è¯¦è§£)
4. [æ—¥å¿—å¤„ç†å™¨æœºåˆ¶](#æ—¥å¿—å¤„ç†å™¨æœºåˆ¶)
5. [å¤šç»´åº¦æ—¥å¿—ç›‘æ§](#å¤šç»´åº¦æ—¥å¿—ç›‘æ§)
6. [æ€§èƒ½ç›‘æ§æ—¥å¿—](#æ€§èƒ½ç›‘æ§æ—¥å¿—)
7. [å®‰å…¨æ—¥å¿—ç›‘æ§](#å®‰å…¨æ—¥å¿—ç›‘æ§)
8. [ä¸šåŠ¡æ—¥å¿—ç›‘æ§](#ä¸šåŠ¡æ—¥å¿—ç›‘æ§)
9. [æ—¥å¿—çº§åˆ«ä¸å¼‚å¸¸è¯†åˆ«](#æ—¥å¿—çº§åˆ«ä¸å¼‚å¸¸è¯†åˆ«)
10. [ç»“æ„åŒ–JSONæ—¥å¿—](#ç»“æ„åŒ–jsonæ—¥å¿—)
11. [æ—¥å¿—åˆ†æå·¥å…·](#æ—¥å¿—åˆ†æå·¥å…·)
12. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
13. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

## ç®€ä»‹

TradingAgents-CNé‡‡ç”¨äº†ä¸€å¥—å®Œæ•´çš„å¤šç»´åº¦æ—¥å¿—ç›‘æ§ç³»ç»Ÿï¼Œæ”¯æŒå¼€å‘ã€ç”Ÿäº§å’ŒDockerä¸‰ç§ç¯å¢ƒçš„å·®å¼‚åŒ–é…ç½®ã€‚è¯¥ç³»ç»Ÿæä¾›äº†çµæ´»çš„æ—¥å¿—çº§åˆ«æ§åˆ¶ã€å¼ºå¤§çš„è½®è½¬æœºåˆ¶ã€è¯¦ç»†çš„æ€§èƒ½ç›‘æ§ã€å…¨é¢çš„å®‰å…¨å®¡è®¡å’Œä¸°å¯Œçš„ä¸šåŠ¡æ´å¯ŸåŠŸèƒ½ã€‚

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```mermaid
graph TB
subgraph "æ—¥å¿—ç³»ç»Ÿæ¶æ„"
A[åº”ç”¨ç¨‹åº] --> B[æ—¥å¿—ç®¡ç†å™¨]
B --> C[æ§åˆ¶å°å¤„ç†å™¨]
B --> D[æ–‡ä»¶å¤„ç†å™¨]
B --> E[ç»“æ„åŒ–å¤„ç†å™¨]
subgraph "å¤„ç†å™¨é…ç½®"
C --> C1[å½©è‰²è¾“å‡º]
D --> D1[RotatingFileHandler]
E --> E1[JSONæ ¼å¼åŒ–]
end
subgraph "ç¯å¢ƒé…ç½®"
F[å¼€å‘ç¯å¢ƒ] --> G[è°ƒè¯•æ¨¡å—]
H[ç”Ÿäº§ç¯å¢ƒ] --> I[ç»“æ„åŒ–æ—¥å¿—]
J[Dockerç¯å¢ƒ] --> K[å®¹å™¨ä¼˜åŒ–]
end
subgraph "ç›‘æ§ç»´åº¦"
L[æ€§èƒ½ç›‘æ§] --> M[æ…¢æ“ä½œè®°å½•]
N[å®‰å…¨ç›‘æ§] --> O[APIè°ƒç”¨å®¡è®¡]
P[ä¸šåŠ¡ç›‘æ§] --> Q[ç”¨æˆ·æ“ä½œè·Ÿè¸ª]
end
end
```

**å›¾è¡¨æ¥æº**
- [tradingagents/utils/logging_manager.py](file://tradingagents/utils/logging_manager.py#L1-L50)
- [config/logging.toml](file://config/logging.toml#L1-L30)

## é…ç½®æ–‡ä»¶è¯¦è§£

### å¼€å‘ç¯å¢ƒé…ç½®

å¼€å‘ç¯å¢ƒä¸“æ³¨äºè°ƒè¯•å’Œé—®é¢˜è¯Šæ–­ï¼Œæä¾›è¯¦ç»†çš„æ¨¡å—çº§æ—¥å¿—ï¼š

```mermaid
graph LR
A[å¼€å‘ç¯å¢ƒ] --> B[è°ƒè¯•æ¨¡å—: tradingagents.graph<br/>tradingagents.llm_adapters]
A --> C[ä¿å­˜è°ƒè¯•æ–‡ä»¶]
A --> D[æ§åˆ¶å°å½©è‰²è¾“å‡º]
A --> E[æ–‡ä»¶DEBUGçº§åˆ«]
```

**å›¾è¡¨æ¥æº**
- [config/logging.toml](file://config/logging.toml#L70-L75)

### ç”Ÿäº§ç¯å¢ƒé…ç½®

ç”Ÿäº§ç¯å¢ƒå¼ºè°ƒæ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ï¼Œé‡‡ç”¨ç»“æ„åŒ–æ—¥å¿—ï¼š

```mermaid
graph LR
A[ç”Ÿäº§ç¯å¢ƒ] --> B[ç»“æ„åŒ–æ—¥å¿—ä¼˜å…ˆ]
A --> C[é”™è¯¯é€šçŸ¥]
A --> D[å¤§æ—¥å¿—æ–‡ä»¶: 100MB]
A --> E[æ€§èƒ½ç›‘æ§å¯ç”¨]
```

**å›¾è¡¨æ¥æº**
- [config/logging.toml](file://config/logging.toml#L76-L82)

### Dockerç¯å¢ƒé…ç½®

Dockerç¯å¢ƒé’ˆå¯¹å®¹å™¨åŒ–éƒ¨ç½²è¿›è¡Œäº†ä¼˜åŒ–ï¼š

```mermaid
graph LR
A[Dockerç¯å¢ƒ] --> B[stdout_only: true]
A --> C[disable_file_logging: true]
A --> D[ä¿®å¤çš„æ–‡ä»¶è·¯å¾„: /app/logs]
A --> E[å®Œæ•´æ ¼å¼é…ç½®]
```

**å›¾è¡¨æ¥æº**
- [config/logging_docker.toml](file://config/logging_docker.toml#L70-L75)

**ç« èŠ‚æ¥æº**
- [config/logging.toml](file://config/logging.toml#L1-L111)
- [config/logging_docker.toml](file://config/logging_docker.toml#L1-L100)

## æ—¥å¿—å¤„ç†å™¨æœºåˆ¶

### RotatingFileHandlerè½®è½¬æœºåˆ¶

ç³»ç»Ÿä½¿ç”¨Pythonæ ‡å‡†åº“çš„RotatingFileHandlerå®ç°æ—¥å¿—è½®è½¬ï¼š

```mermaid
sequenceDiagram
participant App as åº”ç”¨ç¨‹åº
participant LM as æ—¥å¿—ç®¡ç†å™¨
participant RFH as RotatingFileHandler
participant FS as æ–‡ä»¶ç³»ç»Ÿ
App->>LM : å†™å…¥æ—¥å¿—
LM->>RFH : æ ¼å¼åŒ–æ—¥å¿—
RFH->>FS : æ£€æŸ¥æ–‡ä»¶å¤§å°
alt æ–‡ä»¶è¶…è¿‡maxBytes
RFH->>FS : åˆ›å»ºå¤‡ä»½æ–‡ä»¶
RFH->>FS : æ¸…ç©ºåŸå§‹æ–‡ä»¶
end
RFH->>FS : å†™å…¥æ–°æ—¥å¿—
```

**å›¾è¡¨æ¥æº**
- [tradingagents/utils/logging_manager.py](file://tradingagents/utils/logging_manager.py#L226-L240)

### å‚æ•°é…ç½®è¯¦è§£

| å‚æ•° | å¼€å‘ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ | Dockerç¯å¢ƒ | è¯´æ˜ |
|------|----------|----------|------------|------|
| maxBytes | 10MB | 100MB | 100MB | å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å° |
| backupCount | 5 | 5 | 5 | ä¿ç•™çš„å¤‡ä»½æ–‡ä»¶æ•°é‡ |
| directory | ./logs | ./logs | /app/logs | æ—¥å¿—å­˜å‚¨ç›®å½• |

**ç« èŠ‚æ¥æº**
- [tradingagents/utils/logging_manager.py](file://tradingagents/utils/logging_manager.py#L226-L260)

## å¤šç»´åº¦æ—¥å¿—ç›‘æ§

### æ—¥å¿—æ ¼å¼é…ç½®

ç³»ç»Ÿæä¾›ä¸‰ç§æ—¥å¿—æ ¼å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚ï¼š

```mermaid
graph TB
A[æ—¥å¿—æ ¼å¼] --> B[æ§åˆ¶å°æ ¼å¼]
A --> C[æ–‡ä»¶æ ¼å¼]
A --> D[ç»“æ„åŒ–æ ¼å¼]
B --> B1["%(asctime)s | %(name)-20s | %(levelname)-8s | %(message)s"]
C --> C1["%(asctime)s | %(name)-20s | %(levelname)-8s | %(module)s:%(funcName)s:%(lineno)d | %(message)s"]
D --> D1["JSONæ ¼å¼ï¼ŒåŒ…å«å®Œæ•´ä¸Šä¸‹æ–‡ä¿¡æ¯"]
```

**å›¾è¡¨æ¥æº**
- [config/logging.toml](file://config/logging.toml#L8-L10)

### ç‰¹å®šæ¨¡å—é…ç½®

ç³»ç»Ÿä¸ºä¸åŒæ¨¡å—è®¾ç½®äº†ä¸“é—¨çš„æ—¥å¿—çº§åˆ«ï¼š

| æ¨¡å—ç±»åˆ« | æ¨èçº§åˆ« | è¯´æ˜ |
|----------|----------|------|
| tradingagents | INFO | ä¸»åº”ç”¨æ¨¡å— |
| web | INFO | Webç•Œé¢æ¨¡å— |
| dataflows | INFO | æ•°æ®æµå¤„ç† |
| llm_adapters | INFO | LLMé€‚é…å™¨ |
| streamlit | WARNING | å‡å°‘å™ªå£° |
| urllib3 | WARNING | HTTPè¯·æ±‚æ—¥å¿— |
| requests | WARNING | è¯·æ±‚åº“æ—¥å¿— |

**ç« èŠ‚æ¥æº**
- [config/logging.toml](file://config/logging.toml#L40-L65)

## æ€§èƒ½ç›‘æ§æ—¥å¿—

### æ…¢æ“ä½œæ£€æµ‹æœºåˆ¶

```mermaid
flowchart TD
A[æ—¥å¿—æ¡ç›®] --> B{åŒ…å«è€—æ—¶ä¿¡æ¯?}
B --> |æ˜¯| C[æå–è€—æ—¶å€¼]
B --> |å¦| D[è·³è¿‡æ£€æŸ¥]
C --> E{è€—æ—¶ > 5ç§’?}
E --> |æ˜¯| F[æ ‡è®°ä¸ºæ…¢æ“ä½œ]
E --> |å¦| G[æ­£å¸¸è®°å½•]
F --> H[è®°å½•è¯¦ç»†ä¿¡æ¯]
G --> I[å¸¸è§„æ—¥å¿—]
```

**å›¾è¡¨æ¥æº**
- [scripts/log_analyzer.py](file://scripts/log_analyzer.py#L100-L130)

### æ€§èƒ½ç›‘æ§é…ç½®

| é…ç½®é¡¹ | å¼€å‘ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ | Dockerç¯å¢ƒ | è¯´æ˜ |
|--------|----------|----------|------------|------|
| enabled | true | true | true | æ€§èƒ½ç›‘æ§å¼€å…³ |
| log_slow_operations | true | true | true | æ…¢æ“ä½œè®°å½• |
| slow_threshold_seconds | 5.0 | 10.0 | 10.0 | æ…¢æ“ä½œé˜ˆå€¼(ç§’) |
| log_memory_usage | false | false | false | å†…å­˜ä½¿ç”¨è®°å½• |

**ç« èŠ‚æ¥æº**
- [config/logging.toml](file://config/logging.toml#L83-L89)

## å®‰å…¨æ—¥å¿—ç›‘æ§

### APIè°ƒç”¨å®¡è®¡

ç³»ç»Ÿè‡ªåŠ¨è®°å½•æ‰€æœ‰APIè°ƒç”¨çš„å…³é”®ä¿¡æ¯ï¼š

```mermaid
sequenceDiagram
participant Client as å®¢æˆ·ç«¯
participant Logger as å®‰å…¨æ—¥å¿—å™¨
participant Monitor as ç›‘æ§ç³»ç»Ÿ
Client->>Logger : APIè¯·æ±‚
Logger->>Logger : è®°å½•è¯·æ±‚ä¿¡æ¯
Logger->>Monitor : å­˜å‚¨å®¡è®¡æ—¥å¿—
Note over Logger : åŒ…å« : æ—¶é—´æˆ³ã€IPåœ°å€ã€ç”¨æˆ·æ ‡è¯†ã€APIè·¯å¾„ã€å‚æ•°ã€å“åº”çŠ¶æ€
```

**å›¾è¡¨æ¥æº**
- [tradingagents/utils/tool_logging.py](file://tradingagents/utils/tool_logging.py#L150-L200)

### Tokenä½¿ç”¨ç›‘æ§

```mermaid
graph LR
A[Tokenä½¿ç”¨] --> B[è¾“å…¥Tokenè®¡æ•°]
A --> C[è¾“å‡ºTokenè®¡æ•°]
A --> D[æˆæœ¬è®¡ç®—]
A --> E[æä¾›å•†æ ‡è¯†]
B --> F[æˆæœ¬åˆ†æ]
C --> F
D --> F
E --> F
```

**å›¾è¡¨æ¥æº**
- [tradingagents/utils/tool_logging.py](file://tradingagents/utils/tool_logging.py#L350-L380)

### æ•æ„Ÿæ•°æ®ä¿æŠ¤

| åŠŸèƒ½ | å¼€å‘ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ | Dockerç¯å¢ƒ | è¯´æ˜ |
|------|----------|----------|------------|------|
| mask_sensitive_data | true | true | true | å±è”½æ•æ„Ÿæ•°æ® |
| APIè°ƒç”¨è®°å½• | å¯ç”¨ | å¯ç”¨ | å¯ç”¨ | å®Œæ•´å®¡è®¡è½¨è¿¹ |
| Tokenä½¿ç”¨è¿½è¸ª | å¯ç”¨ | å¯ç”¨ | å¯ç”¨ | æˆæœ¬å’Œä½¿ç”¨åˆ†æ |

**ç« èŠ‚æ¥æº**
- [config/logging.toml](file://config/logging.toml#L90-L96)

## ä¸šåŠ¡æ—¥å¿—ç›‘æ§

### ç”¨æˆ·æ“ä½œè·Ÿè¸ª

```mermaid
classDiagram
class UserActivity {
+timestamp : float
+username : str
+user_role : str
+action_type : str
+action_name : str
+details : Dict
+session_id : str
+ip_address : str
+user_agent : str
+page_url : str
+duration_ms : int
+success : bool
+error_message : str
}
class UserActivityLogger {
+log_activity()
+log_login()
+log_logout()
+log_analysis_request()
+log_page_visit()
+get_user_activities()
+get_activity_statistics()
}
UserActivityLogger --> UserActivity : creates
```

**å›¾è¡¨æ¥æº**
- [web/utils/user_activity_logger.py](file://web/utils/user_activity_logger.py#L20-L40)

### åˆ†æäº‹ä»¶è®°å½•

ç³»ç»Ÿè‡ªåŠ¨è®°å½•æ‰€æœ‰åˆ†æç›¸å…³çš„æ“ä½œï¼š

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant System as ç³»ç»Ÿ
participant Logger as åˆ†ææ—¥å¿—å™¨
participant Monitor as ç›‘æ§ç³»ç»Ÿ
User->>System : è¯·æ±‚è‚¡ç¥¨åˆ†æ
System->>Logger : è®°å½•åˆ†æå¼€å§‹
System->>System : æ‰§è¡Œåˆ†æ
System->>Logger : è®°å½•åˆ†æå®Œæˆ
Logger->>Monitor : å­˜å‚¨åˆ†ææ—¥å¿—
Note over Logger : åŒ…å« : è‚¡ç¥¨ä»£ç ã€åˆ†æç±»å‹ã€è€—æ—¶ã€æˆæœ¬ã€ç»“æœ
```

**å›¾è¡¨æ¥æº**
- [tradingagents/utils/logging_manager.py](file://tradingagents/utils/logging_manager.py#L350-L410)

### ä¸šåŠ¡ç›‘æ§é…ç½®

| ç›‘æ§ç±»å‹ | å¼€å¯çŠ¶æ€ | è®°å½•å†…å®¹ | ç”¨é€” |
|----------|----------|----------|------|
| log_analysis_events | true | åˆ†æå¼€å§‹/å®Œæˆ | æ€§èƒ½åˆ†æ |
| log_user_actions | true | ç”¨æˆ·æ“ä½œ | è¡Œä¸ºåˆ†æ |
| log_export_events | true | æ•°æ®å¯¼å‡º | åˆè§„å®¡è®¡ |

**ç« èŠ‚æ¥æº**
- [config/logging.toml](file://config/logging.toml#L97-L103)

## æ—¥å¿—çº§åˆ«ä¸å¼‚å¸¸è¯†åˆ«

### æ—¥å¿—çº§åˆ«å±‚æ¬¡

```mermaid
graph TD
A[CRITICAL] --> B[ERROR]
B --> C[WARNING]
C --> D[INFO]
D --> E[DEBUG]
A --> A1[ç³»ç»Ÿå´©æºƒ]
B --> B1[ä¸¥é‡é”™è¯¯]
C --> C1[è­¦å‘Šä¿¡æ¯]
D --> D1[ä¸€èˆ¬ä¿¡æ¯]
E --> E1[è°ƒè¯•ç»†èŠ‚]
```

### å¼‚å¸¸è¯†åˆ«æ–¹æ³•

| çº§åˆ« | æ ‡è¯†ç¬¦ | è¯†åˆ«æ–¹æ³• | å“åº”æªæ–½ |
|------|--------|----------|----------|
| ERROR | âŒ | é”™è¯¯æ—¥å¿—æ•°é‡ | ç«‹å³æ’æŸ¥ |
| WARNING | âš ï¸ | è­¦å‘Šæ—¥å¿—æ•°é‡ | å®šæœŸæ£€æŸ¥ |
| INFO | â„¹ï¸ | ä¿¡æ¯æ—¥å¿—åˆ†å¸ƒ | ç›‘æ§è¶‹åŠ¿ |
| DEBUG | ğŸ” | è°ƒè¯•æ—¥å¿—å†…å®¹ | é—®é¢˜å®šä½ |

### å¸¸è§å¼‚å¸¸æ¨¡å¼

```mermaid
flowchart LR
A[æ—¥å¿—åˆ†æ] --> B[é”™è¯¯åˆ†ç±»]
B --> C[APIé”™è¯¯]
B --> D[ç½‘ç»œé”™è¯¯]
B --> E[æ•°æ®åº“é”™è¯¯]
B --> F[å…¶ä»–é”™è¯¯]
C --> C1[é‡è¯•æœºåˆ¶]
D --> D1[è¿æ¥æ£€æŸ¥]
E --> E1[æ•°æ®åº“ç»´æŠ¤]
F --> F1[é€šç”¨å¤„ç†]
```

**å›¾è¡¨æ¥æº**
- [scripts/log_analyzer.py](file://scripts/log_analyzer.py#L167-L198)

**ç« èŠ‚æ¥æº**
- [scripts/log_analyzer.py](file://scripts/log_analyzer.py#L131-L198)

## ç»“æ„åŒ–JSONæ—¥å¿—

### JSONæ ¼å¼ä¼˜åŠ¿

ç»“æ„åŒ–æ—¥å¿—æä¾›äº†ä»¥ä¸‹ä¼˜åŠ¿ï¼š

```mermaid
graph LR
A[ç»“æ„åŒ–JSONæ—¥å¿—] --> B[æ˜“äºè§£æ]
A --> C[ä¾¿äºæœç´¢]
A --> D[æ”¯æŒå…¨æ–‡ç´¢å¼•]
A --> E[è‡ªåŠ¨åŒ–åˆ†æ]
B --> F[æœºå™¨å¯è¯»]
C --> G[ç²¾ç¡®åŒ¹é…]
D --> H[é«˜æ•ˆæ£€ç´¢]
E --> I[æ™ºèƒ½åˆ†æ]
```

### JSONæ—¥å¿—æ ¼å¼

```json
{
  "timestamp": "2024-01-15T10:30:45.123456",
  "level": "INFO",
  "logger": "tools",
  "message": "å·¥å…·è°ƒç”¨å®Œæˆ",
  "module": "tool_logging",
  "function": "wrapper",
  "line": 50,
  "session_id": "session_1234567890",
  "tool_name": "stock_analysis",
  "duration": 2.345,
  "event_type": "tool_call_success"
}
```

### ç»“æ„åŒ–æ—¥å¿—é…ç½®

| é…ç½®é¡¹ | å¼€å‘ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ | Dockerç¯å¢ƒ | è¯´æ˜ |
|--------|----------|----------|------------|------|
| enabled | false | true | true | ç»“æ„åŒ–æ—¥å¿—å¼€å…³ |
| level | INFO | INFO | INFO | æ—¥å¿—çº§åˆ« |
| directory | ./logs | ./logs | /app/logs | å­˜å‚¨ç›®å½• |
| backupCount | 3 | 3 | 3 | å¤‡ä»½æ–‡ä»¶æ•° |

**ç« èŠ‚æ¥æº**
- [tradingagents/utils/logging_manager.py](file://tradingagents/utils/logging_manager.py#L261-L280)
- [config/logging.toml](file://config/logging.toml#L25-L30)

## æ—¥å¿—åˆ†æå·¥å…·

### LogAnalyzeråŠŸèƒ½

```mermaid
classDiagram
class LogAnalyzer {
+log_file : Path
+entries : List
+structured_entries : List
+parse_logs()
+analyze_performance()
+analyze_errors()
+analyze_usage()
+generate_report()
}
class AnalysisResults {
+slow_operations : List
+analysis_times : List
+cost_summary : Dict
+error_count : int
+warning_count : int
+daily_usage : Dict
+module_usage : Dict
}
LogAnalyzer --> AnalysisResults : generates
```

**å›¾è¡¨æ¥æº**
- [scripts/log_analyzer.py](file://scripts/log_analyzer.py#L21-L50)

### åˆ†ææŠ¥å‘Šç”Ÿæˆ

ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„æ—¥å¿—åˆ†ææŠ¥å‘Šï¼š

```mermaid
flowchart TD
A[æ—¥å¿—æ–‡ä»¶] --> B[LogAnalyzer]
B --> C[æ€§èƒ½åˆ†æ]
B --> D[é”™è¯¯åˆ†æ]
B --> E[ä½¿ç”¨æƒ…å†µåˆ†æ]
C --> F[æ…¢æ“ä½œç»Ÿè®¡]
C --> G[å¹³å‡è€—æ—¶]
C --> H[æˆæœ¬æ±‡æ€»]
D --> I[é”™è¯¯åˆ†ç±»]
D --> J[æœ€è¿‘é”™è¯¯]
D --> K[é”™è¯¯æ¨¡å¼]
E --> L[æ¯æ—¥ä½¿ç”¨é‡]
E --> M[æ¨¡å—ä½¿ç”¨]
E --> N[åˆ†æç±»å‹]
F --> O[ç”ŸæˆæŠ¥å‘Š]
G --> O
H --> O
I --> O
J --> O
K --> O
L --> O
M --> O
N --> O
```

**å›¾è¡¨æ¥æº**
- [scripts/log_analyzer.py](file://scripts/log_analyzer.py#L300-L372)

**ç« èŠ‚æ¥æº**
- [scripts/log_analyzer.py](file://scripts/log_analyzer.py#L1-L373)

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

| é—®é¢˜ç±»å‹ | ç—‡çŠ¶ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|----------|------|----------|----------|
| æ—¥å¿—æ–‡ä»¶ç¼ºå¤± | æ— æ—¥å¿—è¾“å‡º | ç›®å½•æƒé™é—®é¢˜ | æ£€æŸ¥logsç›®å½•æƒé™ |
| Dockeræ—¥å¿—é”™è¯¯ | KeyError: 'file' | é…ç½®æ–‡ä»¶ä¸å®Œæ•´ | ä½¿ç”¨logging_docker.toml |
| æ€§èƒ½é—®é¢˜ | æ—¥å¿—å†™å…¥ç¼“æ…¢ | æ–‡ä»¶è¿‡å¤§ | è°ƒæ•´maxByteså‚æ•° |
| ç»“æ„åŒ–æ—¥å¿—å¼‚å¸¸ | JSONè§£æé”™è¯¯ | ç¼–ç é—®é¢˜ | æ£€æŸ¥UTF-8ç¼–ç  |

### è°ƒè¯•æ­¥éª¤

```mermaid
flowchart TD
A[å‘ç°é—®é¢˜] --> B[æ£€æŸ¥æ—¥å¿—çº§åˆ«]
B --> C[éªŒè¯é…ç½®æ–‡ä»¶]
C --> D[æ£€æŸ¥ç›®å½•æƒé™]
D --> E[æµ‹è¯•æ—¥å¿—å†™å…¥]
E --> F[åˆ†æé”™è¯¯æ¨¡å¼]
F --> G[å®æ–½è§£å†³æ–¹æ¡ˆ]
```

**ç« èŠ‚æ¥æº**
- [scripts/test_docker_logging.py](file://scripts/test_docker_logging.py#L1-L64)

## æœ€ä½³å®è·µ

### æ—¥å¿—é…ç½®å»ºè®®

1. **å¼€å‘ç¯å¢ƒ**
   - å¯ç”¨è¯¦ç»†æ—¥å¿—è®°å½•
   - ä½¿ç”¨å½©è‰²è¾“å‡ºæé«˜å¯è¯»æ€§
   - ä¿å­˜è°ƒè¯•æ–‡ä»¶ä¾¿äºé—®é¢˜è¿½è¸ª

2. **ç”Ÿäº§ç¯å¢ƒ**
   - å¯ç”¨ç»“æ„åŒ–æ—¥å¿—
   - è®¾ç½®é€‚å½“çš„æ—¥å¿—çº§åˆ«
   - é…ç½®åˆç†çš„è½®è½¬å‚æ•°

3. **Dockerç¯å¢ƒ**
   - ä½¿ç”¨å®¹å™¨ä¼˜åŒ–é…ç½®
   - ç¡®ä¿æ­£ç¡®çš„æ–‡ä»¶è·¯å¾„
   - éªŒè¯æ—¥å¿—è¾“å‡ºé…ç½®

### ç›‘æ§ç­–ç•¥

```mermaid
graph LR
A[å®æ—¶ç›‘æ§] --> B[æ…¢æ“ä½œå‘Šè­¦]
A --> C[é”™è¯¯ç‡ç›‘æ§]
A --> D[æ€§èƒ½è¶‹åŠ¿]
E[å®šæœŸåˆ†æ] --> F[ä½¿ç”¨é‡ç»Ÿè®¡]
E --> G[æˆæœ¬åˆ†æ]
E --> H[å®‰å…¨å®¡è®¡]
B --> I[æ€§èƒ½ä¼˜åŒ–]
C --> J[é—®é¢˜ä¿®å¤]
D --> K[å®¹é‡è§„åˆ’]
F --> L[èµ„æºåˆ†é…]
G --> M[æˆæœ¬æ§åˆ¶]
H --> N[å®‰å…¨åŠ å›º]
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ—¥å¿—çº§åˆ«ä¼˜åŒ–**
   - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨INFOçº§åˆ«
   - é¿å…DEBUGçº§åˆ«çš„é«˜é¢‘ä½¿ç”¨
   - åˆç†è®¾ç½®ç¬¬ä¸‰æ–¹åº“æ—¥å¿—çº§åˆ«

2. **è½®è½¬ç­–ç•¥ä¼˜åŒ–**
   - æ ¹æ®å­˜å‚¨ç©ºé—´è°ƒæ•´backupCount
   - å®šæœŸæ¸…ç†è¿‡æœŸæ—¥å¿—æ–‡ä»¶
   - ç›‘æ§ç£ç›˜ä½¿ç”¨æƒ…å†µ

3. **ç»“æ„åŒ–æ—¥å¿—ä½¿ç”¨**
   - åœ¨éœ€è¦è‡ªåŠ¨åŒ–åˆ†æçš„åœºæ™¯å¯ç”¨
   - å¹³è¡¡å­˜å‚¨æˆæœ¬å’Œåˆ†æä»·å€¼
   - è€ƒè™‘æ—¥å¿—å‹ç¼©å­˜å‚¨

**ç« èŠ‚æ¥æº**
- [tradingagents/utils/logging_init.py](file://tradingagents/utils/logging_init.py#L1-L166)
- [tradingagents/utils/tool_logging.py](file://tradingagents/utils/tool_logging.py#L1-L424)