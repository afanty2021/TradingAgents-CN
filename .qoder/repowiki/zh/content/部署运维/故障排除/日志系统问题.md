# æ—¥å¿—ç³»ç»Ÿé—®é¢˜

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**  
- [duplicate_logger_fix_report.md](file://reports/duplicate_logger_fix_report.md)
- [logger_position_fix_report.md](file://reports/logger_position_fix_report.md)
- [logging_import_fix_report.md](file://reports/logging_import_fix_report.md)
- [print_to_log_conversion_report.md](file://reports/print_to_log_conversion_report.md)
- [fix_duplicate_loggers.py](file://scripts/fix_duplicate_loggers.py)
- [fix_logger_position.py](file://scripts/fix_logger_position.py)
- [fix_logging_imports.py](file://scripts/fix_logging_imports.py)
- [convert_prints_to_logs.py](file://scripts/convert_prints_to_logs.py)
- [logging.toml](file://config/logging.toml)
- [logging_docker.toml](file://config/logging_docker.toml)
- [logging_manager.py](file://tradingagents/utils/logging_manager.py)
- [logging_init.py](file://tradingagents/utils/logging_init.py)
- [syntax_error_files_report.txt](file://reports/syntax_error_files_report.txt)
- [fix_logging_config_error.py](file://scripts/fix_logging_config_error.py)
</cite>

## ç›®å½•
1. [é—®é¢˜æ¦‚è¿°](#é—®é¢˜æ¦‚è¿°)
2. [é‡å¤æ—¥å¿—è®°å½•å™¨é—®é¢˜](#é‡å¤æ—¥å¿—è®°å½•å™¨é—®é¢˜)
3. [æ—¥å¿—çº§åˆ«é”™ä¹±é—®é¢˜](#æ—¥å¿—çº§åˆ«é”™ä¹±é—®é¢˜)
4. [æ—¥å¿—æ–‡ä»¶æ— æ³•ç”Ÿæˆé—®é¢˜](#æ—¥å¿—æ–‡ä»¶æ— æ³•ç”Ÿæˆé—®é¢˜)
5. [æ—¥å¿—é…ç½®æ–‡ä»¶è¯¦è§£](#æ—¥å¿—é…ç½®æ–‡ä»¶è¯¦è§£)
6. [æ—¥å¿—é…ç½®éªŒè¯ä¸è°ƒè¯•æ–¹æ³•](#æ—¥å¿—é…ç½®éªŒè¯ä¸è°ƒè¯•æ–¹æ³•)
7. [ç»¼åˆä¿®å¤æ–¹æ¡ˆ](#ç»¼åˆä¿®å¤æ–¹æ¡ˆ)
8. [é¢„é˜²æªæ–½ä¸æœ€ä½³å®è·µ](#é¢„é˜²æªæ–½ä¸æœ€ä½³å®è·µ)

## é—®é¢˜æ¦‚è¿°

æœ¬æŒ‡å—æ—¨åœ¨è§£å†³TradingAgents-CNé¡¹ç›®ä¸­å‡ºç°çš„æ—¥å¿—ç³»ç»Ÿé—®é¢˜ï¼ŒåŒ…æ‹¬é‡å¤æ—¥å¿—è®°å½•ã€æ—¥å¿—çº§åˆ«é”™ä¹±å’Œæ—¥å¿—æ–‡ä»¶æ— æ³•ç”Ÿæˆç­‰å¸¸è§æ•…éšœã€‚é€šè¿‡åˆ†æreports/ç›®å½•ä¸‹çš„å„ç±»ä¿®å¤æŠ¥å‘Šå’Œä¿®å¤è„šæœ¬ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨é—®é¢˜æ ¹æºå¹¶æä¾›ç³»ç»Ÿæ€§çš„è§£å†³æ–¹æ¡ˆã€‚

é¡¹ç›®ä¸­çš„æ—¥å¿—ç³»ç»ŸåŸºäºPythonæ ‡å‡†åº“loggingæ¨¡å—æ„å»ºï¼Œé€šè¿‡ç»Ÿä¸€çš„logging_manager.pyè¿›è¡Œç®¡ç†ï¼Œå¹¶ä½¿ç”¨TOMLæ ¼å¼çš„é…ç½®æ–‡ä»¶è¿›è¡Œçµæ´»é…ç½®ã€‚ç„¶è€Œï¼Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç”±äºå¤šå¤„ä»£ç é‡å¤å®šä¹‰loggerã€æ—¥å¿—å¯¼å…¥ä½ç½®ä¸å½“ä»¥åŠé…ç½®æ–‡ä»¶ä¸å®Œæ•´ç­‰é—®é¢˜ï¼Œå¯¼è‡´äº†æ—¥å¿—ç³»ç»Ÿçš„ä¸ç¨³å®šã€‚

**Section sources**
- [duplicate_logger_fix_report.md](file://reports/duplicate_logger_fix_report.md)
- [logger_position_fix_report.md](file://reports/logger_position_fix_report.md)
- [logging_import_fix_report.md](file://reports/logging_import_fix_report.md)
- [print_to_log_conversion_report.md](file://reports/print_to_log_conversion_report.md)

## é‡å¤æ—¥å¿—è®°å½•å™¨é—®é¢˜

### é—®é¢˜æ ¹æº

é‡å¤æ—¥å¿—è®°å½•å™¨é—®é¢˜æ˜¯æœ¬é¡¹ç›®ä¸­æœ€æ™®éçš„æ—¥å¿—é—®é¢˜ã€‚æ ¹æ®duplicate_logger_fix_report.mdæŠ¥å‘Šï¼Œç³»ç»Ÿæ‰«æäº†321ä¸ªPythonæ–‡ä»¶ï¼Œå‘ç°98ä¸ªæ–‡ä»¶å­˜åœ¨é‡å¤çš„loggerå®šä¹‰ï¼Œæ€»å…±éœ€è¦ç§»é™¤108ä¸ªé‡å¤å®šä¹‰ã€‚

é—®é¢˜ä¸»è¦è¡¨ç°ä¸ºåœ¨åŒä¸€ä¸ªPythonæ–‡ä»¶ä¸­å¤šæ¬¡å®šä¹‰loggerå˜é‡ï¼Œä¾‹å¦‚ï¼š
```python
logger = get_logger('default')
# ... å…¶ä»–ä»£ç  ...
logger = get_logger('default')  # é‡å¤å®šä¹‰
```

è¿™ç§é‡å¤å®šä¹‰ä¼šå¯¼è‡´æ—¥å¿—è¾“å‡ºæ··ä¹±ï¼Œå¯èƒ½äº§ç”Ÿé‡å¤çš„æ—¥å¿—æ¡ç›®ï¼Œå½±å“æ—¥å¿—çš„å¯è¯»æ€§å’Œåˆ†ææ•ˆç‡ã€‚

### ä¿®å¤æ–¹æ¡ˆ

é¡¹ç›®æä¾›äº†fix_duplicate_loggers.pyè„šæœ¬ä¸“é—¨è§£å†³æ­¤é—®é¢˜ã€‚è¯¥è„šæœ¬çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š

1. **æ‰«ææ‰€æœ‰Pythonæ–‡ä»¶**ï¼šéå†é¡¹ç›®ç›®å½•ï¼ŒæŸ¥æ‰¾æ‰€æœ‰.pyæ–‡ä»¶ï¼Œæ’é™¤è™šæ‹Ÿç¯å¢ƒå’Œç¼“å­˜ç›®å½•ã€‚
2. **åˆ†æloggerå®šä¹‰**ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼`^\s*logger\s*=\s*get_logger\s*\(`è¯†åˆ«æ–‡ä»¶ä¸­çš„loggerå®šä¹‰è¯­å¥ã€‚
3. **ç¡®å®šä¿ç•™ä½ç½®**ï¼šä¼˜å…ˆä¿ç•™åœ¨importè¯­å¥åŒºåŸŸé™„è¿‘çš„loggerå®šä¹‰ï¼ˆimportå5è¡Œå†…ï¼‰ï¼Œå¦‚æœéƒ½æ²¡æœ‰åˆ™ä¿ç•™ç¬¬ä¸€ä¸ªã€‚
4. **ç§»é™¤é‡å¤å®šä¹‰**ï¼šä»åå¾€å‰åˆ é™¤é‡å¤çš„loggerå®šä¹‰ï¼Œé¿å…è¡Œå·å˜åŒ–å¯¼è‡´çš„é—®é¢˜ã€‚
5. **ç”Ÿæˆä¿®å¤æŠ¥å‘Š**ï¼šåˆ›å»ºè¯¦ç»†çš„ä¿®å¤æŠ¥å‘Šï¼Œè®°å½•æ¯ä¸ªæ–‡ä»¶çš„ä¿®å¤è¯¦æƒ…ã€‚

ä¿®å¤è„šæœ¬æˆåŠŸä¿®å¤äº†98ä¸ªæ–‡ä»¶ï¼ŒåŒ…æ‹¬main.pyã€fix_stock_code_issue.pyç­‰æ ¸å¿ƒæ–‡ä»¶ï¼Œç¡®ä¿äº†æ¯ä¸ªæ–‡ä»¶åªä¿ç•™ä¸€ä¸ªloggerå®šä¹‰ã€‚

```mermaid
flowchart TD
Start([å¼€å§‹ä¿®å¤]) --> ScanFiles["æ‰«ææ‰€æœ‰Pythonæ–‡ä»¶"]
ScanFiles --> Analyze["åˆ†æloggerå®šä¹‰"]
Analyze --> HasDuplicates{"å­˜åœ¨é‡å¤å®šä¹‰?"}
HasDuplicates --> |æ˜¯| FindImportEnd["æ‰¾åˆ°importè¯­å¥ç»“æŸä½ç½®"]
FindImportEnd --> DetermineKeep["ç¡®å®šä¿ç•™çš„loggerä½ç½®"]
DetermineKeep --> RemoveDuplicates["ç§»é™¤é‡å¤çš„loggerå®šä¹‰"]
RemoveDuplicates --> WriteBack["å†™å›ä¿®æ”¹åçš„æ–‡ä»¶"]
WriteBack --> GenerateReport["ç”Ÿæˆä¿®å¤æŠ¥å‘Š"]
GenerateReport --> End([ä¿®å¤å®Œæˆ])
HasDuplicates --> |å¦| Skip["è·³è¿‡æ–‡ä»¶"]
Skip --> End
```

**Diagram sources**
- [fix_duplicate_loggers.py](file://scripts/fix_duplicate_loggers.py)
- [duplicate_logger_fix_report.md](file://reports/duplicate_logger_fix_report.md)

**Section sources**
- [fix_duplicate_loggers.py](file://scripts/fix_duplicate_loggers.py)
- [duplicate_logger_fix_report.md](file://reports/duplicate_logger_fix_report.md)

## æ—¥å¿—çº§åˆ«é”™ä¹±é—®é¢˜

### é—®é¢˜æ ¹æº

æ—¥å¿—çº§åˆ«é”™ä¹±é—®é¢˜ä¸»è¦æºäºä¸¤ä¸ªæ–¹é¢ï¼šä¸€æ˜¯printè¯­å¥æœªè½¬æ¢ä¸ºæ—¥å¿—è¾“å‡ºï¼ŒäºŒæ˜¯æ—¥å¿—å¯¼å…¥ä½ç½®ä¸å½“ã€‚

æ ¹æ®print_to_log_conversion_report.mdæŠ¥å‘Šï¼Œé¡¹ç›®æˆåŠŸå°†100ä¸ªæ–‡ä»¶ä¸­çš„printè¯­å¥è½¬æ¢ä¸ºæ—¥å¿—è¾“å‡ºã€‚è¿™äº›printè¯­å¥åŸæœ¬åˆ†æ•£åœ¨ä»£ç å„å¤„ï¼Œå¯¼è‡´æ—¥å¿—çº§åˆ«æ— æ³•æ§åˆ¶ï¼Œæ‰€æœ‰è¾“å‡ºéƒ½ä»¥é»˜è®¤çº§åˆ«æ˜¾ç¤ºï¼Œæ— æ³•åŒºåˆ†è°ƒè¯•ä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯ã€‚

åŒæ—¶ï¼Œlogging_import_fix_report.mdæŠ¥å‘Šæ˜¾ç¤ºï¼Œ103ä¸ªæ–‡ä»¶çš„æ—¥å¿—å¯¼å…¥ä½ç½®å¾—åˆ°äº†ä¿®å¤ã€‚åŸæœ¬æ—¥å¿—å¯¼å…¥è¯­å¥å¯èƒ½å‡ºç°åœ¨å‡½æ•°å†…éƒ¨æˆ–æ–‡ä»¶æœ«å°¾ï¼Œå¯¼è‡´loggeråˆå§‹åŒ–æ—¶æœºä¸å½“ï¼Œå½±å“æ—¥å¿—ç³»ç»Ÿçš„æ­£å¸¸å·¥ä½œã€‚

### ä¿®å¤æ–¹æ¡ˆ

é¡¹ç›®æä¾›äº†ä¸¤ä¸ªè„šæœ¬è§£å†³æ­¤é—®é¢˜ï¼š

1. **convert_prints_to_logs.py**ï¼šå°†printè¯­å¥è½¬æ¢ä¸ºé€‚å½“çš„æ—¥å¿—è°ƒç”¨
   - æ ¹æ®æ¶ˆæ¯å†…å®¹è‡ªåŠ¨ç¡®å®šæ—¥å¿—çº§åˆ«ï¼ˆå¦‚åŒ…å«"é”™è¯¯"ã€"ERROR"ç­‰å…³é”®è¯çš„ä¸ºerrorçº§åˆ«ï¼‰
   - æ”¯æŒf-stringæ ¼å¼çš„printè¯­å¥è½¬æ¢
   - è‡ªåŠ¨æ·»åŠ å¿…è¦çš„æ—¥å¿—å¯¼å…¥è¯­å¥

2. **fix_logging_imports.py**ï¼šä¿®å¤æ—¥å¿—å¯¼å…¥ä½ç½®
   - å°†æ—¥å¿—å¯¼å…¥è¯­å¥ç§»åŠ¨åˆ°importè¯­å¥å—ä¹‹å
   - æ ¹æ®æ–‡ä»¶è·¯å¾„ç¡®å®šé€‚å½“çš„loggeråç§°ï¼ˆå¦‚webç›®å½•ä½¿ç”¨'web'ï¼Œscriptsç›®å½•ä½¿ç”¨'scripts'ï¼‰
   - ç¡®ä¿loggeråœ¨æ–‡ä»¶é¡¶éƒ¨æ­£ç¡®åˆå§‹åŒ–

ä¿®å¤åï¼Œæ‰€æœ‰è¾“å‡ºéƒ½é€šè¿‡ç»Ÿä¸€çš„æ—¥å¿—ç³»ç»Ÿç®¡ç†ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼Œæé«˜äº†æ—¥å¿—çš„ç»„ç»‡æ€§å’Œå¯è¯»æ€§ã€‚

```mermaid
flowchart TD
Start([å¼€å§‹è½¬æ¢]) --> FindPrints["æŸ¥æ‰¾æ‰€æœ‰printè¯­å¥"]
FindPrints --> ClassifyLevel["æ ¹æ®å†…å®¹åˆ†ç±»æ—¥å¿—çº§åˆ«"]
ClassifyLevel --> AddImports["æ·»åŠ æ—¥å¿—å¯¼å…¥è¯­å¥"]
AddImports --> ConvertToLog["è½¬æ¢ä¸ºlogger.info/debug/errorç­‰"]
ConvertToLog --> WriteBack["å†™å›æ–‡ä»¶"]
WriteBack --> GenerateReport["ç”Ÿæˆè½¬æ¢æŠ¥å‘Š"]
GenerateReport --> End([è½¬æ¢å®Œæˆ])
```

**Diagram sources**
- [convert_prints_to_logs.py](file://scripts/convert_prints_to_logs.py)
- [fix_logging_imports.py](file://scripts/fix_logging_imports.py)
- [print_to_log_conversion_report.md](file://reports/print_to_log_conversion_report.md)
- [logging_import_fix_report.md](file://reports/logging_import_fix_report.md)

**Section sources**
- [convert_prints_to_logs.py](file://scripts/convert_prints_to_logs.py)
- [fix_logging_imports.py](file://scripts/fix_logging_imports.py)
- [print_to_log_conversion_report.md](file://reports/print_to_log_conversion_report.md)
- [logging_import_fix_report.md](file://reports/logging_import_fix_report.md)

## æ—¥å¿—æ–‡ä»¶æ— æ³•ç”Ÿæˆé—®é¢˜

### é—®é¢˜æ ¹æº

æ—¥å¿—æ–‡ä»¶æ— æ³•ç”Ÿæˆé—®é¢˜ä¸»è¦å‡ºç°åœ¨Dockerç¯å¢ƒä¸­ï¼Œæ ¹æ®åˆ†æï¼Œé—®é¢˜æ ¹æºåŒ…æ‹¬ï¼š

1. **é…ç½®æ–‡ä»¶ä¸å®Œæ•´**ï¼šåŸå§‹çš„logging.tomlå’Œlogging_docker.tomlæ–‡ä»¶ç¼ºå°‘å¿…è¦çš„fileæ ¼å¼é…ç½®ï¼Œå¯¼è‡´KeyError: 'file'é”™è¯¯ã€‚
2. **Dockerç¯å¢ƒæ£€æµ‹é—®é¢˜**ï¼šæ—¥å¿—ç³»ç»Ÿæ— æ³•æ­£ç¡®æ£€æµ‹Dockerç¯å¢ƒï¼Œå¯¼è‡´æ–‡ä»¶å¤„ç†å™¨æœªæ­£ç¡®åˆå§‹åŒ–ã€‚
3. **ç›®å½•æƒé™é—®é¢˜**ï¼šå®¹å™¨å†…/app/logsç›®å½•å¯èƒ½ä¸å­˜åœ¨æˆ–æ— å†™å…¥æƒé™ã€‚
4. **è¯­æ³•é”™è¯¯**ï¼šå¤šä¸ªPythonæ–‡ä»¶å­˜åœ¨è¯­æ³•é”™è¯¯ï¼Œå¯¼è‡´ç¨‹åºæ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œä»è€Œæ— æ³•ç”Ÿæˆæ—¥å¿—ã€‚

syntax_error_files_report.txtæŠ¥å‘Šæ˜¾ç¤ºï¼Œå…±æœ‰65ä¸ªæ–‡ä»¶å­˜åœ¨è¯­æ³•é”™è¯¯ï¼Œä¸»è¦ç±»å‹åŒ…æ‹¬ï¼š
- æ„å¤–çš„ç¼©è¿›ï¼ˆunexpected indentï¼‰
- ç¼ºå°‘exceptæˆ–finallyå—
- æ— æ•ˆè¯­æ³•ï¼ˆinvalid syntaxï¼‰
- éASCIIå­—ç¬¦ï¼ˆå¦‚ä¸­æ–‡å¥å·ï¼‰

### ä¿®å¤æ–¹æ¡ˆ

é’ˆå¯¹æ—¥å¿—æ–‡ä»¶æ— æ³•ç”Ÿæˆé—®é¢˜ï¼Œé‡‡å–äº†ä»¥ä¸‹ç»¼åˆä¿®å¤æªæ–½ï¼š

1. **ä¿®å¤é…ç½®æ–‡ä»¶**ï¼šä½¿ç”¨fix_logging_config_error.pyè„šæœ¬ä¿®å¤é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿åŒ…å«å®Œæ•´çš„fileæ ¼å¼é…ç½®ã€‚
2. **åˆ›å»ºç®€å•æµ‹è¯•**ï¼šåˆ›å»ºsimple_log_test.pyè¿›è¡Œæœ€å°åŒ–æ—¥å¿—æµ‹è¯•ï¼Œæ’é™¤å¤æ‚ä¾èµ–çš„å½±å“ã€‚
3. **ä¿®å¤è¯­æ³•é”™è¯¯**ï¼šä¿®å¤æ‰€æœ‰å­˜åœ¨è¯­æ³•é”™è¯¯çš„æ–‡ä»¶ï¼Œç¡®ä¿ç¨‹åºèƒ½å¤Ÿæ­£å¸¸å¯åŠ¨ã€‚

ä¿®å¤åçš„logging_docker.tomlæ–‡ä»¶åŒ…å«äº†å®Œæ•´çš„é…ç½®ï¼Œç‰¹åˆ«æ˜¯ç¡®ä¿äº†[logging.format]éƒ¨åˆ†åŒ…å«fileé…ç½®ï¼Œè§£å†³äº†KeyErroré—®é¢˜ã€‚

```mermaid
flowchart TD
Start([å¼€å§‹ä¿®å¤]) --> CheckConfig["æ£€æŸ¥æ—¥å¿—é…ç½®æ–‡ä»¶"]
CheckConfig --> FixDockerConfig["ä¿®å¤Dockeré…ç½®æ–‡ä»¶"]
FixDockerConfig --> FixMainConfig["ä¿®å¤ä¸»é…ç½®æ–‡ä»¶"]
FixMainConfig --> CreateTest["åˆ›å»ºç®€å•æ—¥å¿—æµ‹è¯•"]
CreateTest --> TestLog["æµ‹è¯•æ—¥å¿—åŠŸèƒ½"]
TestLog --> VerifyFiles["éªŒè¯æ—¥å¿—æ–‡ä»¶ç”Ÿæˆ"]
VerifyFiles --> End([ä¿®å¤å®Œæˆ])
```

**Diagram sources**
- [fix_logging_config_error.py](file://scripts/fix_logging_config_error.py)
- [logging_docker.toml](file://config/logging_docker.toml)
- [syntax_error_files_report.txt](file://reports/syntax_error_files_report.txt)

**Section sources**
- [fix_logging_config_error.py](file://scripts/fix_logging_config_error.py)
- [logging_docker.toml](file://config/logging_docker.toml)
- [syntax_error_files_report.txt](file://reports/syntax_error_files_report.txt)

## æ—¥å¿—é…ç½®æ–‡ä»¶è¯¦è§£

### logging.tomlé…ç½®ç»“æ„

logging.tomlæ˜¯é¡¹ç›®çš„ä¸»æ—¥å¿—é…ç½®æ–‡ä»¶ï¼Œé‡‡ç”¨TOMLæ ¼å¼ï¼Œç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ã€‚ä¸»è¦é…ç½®éƒ¨åˆ†åŒ…æ‹¬ï¼š

#### å…¨å±€é…ç½®
```toml
[logging]
level = "INFO"  # å…¨å±€æ—¥å¿—çº§åˆ«
```

#### æ ¼å¼é…ç½®
```toml
[logging.format]
console = "%(asctime)s | %(name)-20s | %(levelname)-8s | %(message)s"
file = "%(asctime)s | %(name)-20s | %(levelname)-8s | %(module)s:%(funcName)s:%(lineno)d | %(message)s"
structured = "json"
```

#### å¤„ç†å™¨é…ç½®
```toml
[logging.handlers.console]
enabled = true
colored = true
level = "INFO"

[logging.handlers.file]
enabled = true
level = "DEBUG"
max_size = "10MB"
backup_count = 5
directory = "./logs"
```

#### ç‰¹å®šæ—¥å¿—å™¨é…ç½®
```toml
[logging.loggers.tradingagents]
level = "INFO"

[logging.loggers.web]
level = "INFO"

[logging.loggers.streamlit]
level = "WARNING"  # é™ä½ç¬¬ä¸‰æ–¹åº“æ—¥å¿—çº§åˆ«
```

#### ç¯å¢ƒç‰¹å®šé…ç½®
```toml
[logging.docker]
enabled = false
stdout_only = true
disable_file_logging = true

[logging.development]
enabled = false
debug_modules = ["tradingagents.graph", "tradingagents.llm_adapters"]
```

### é…ç½®å‚æ•°å«ä¹‰

| é…ç½®é¡¹ | å«ä¹‰ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| level | æ—¥å¿—çº§åˆ« | DEBUG, INFO, WARNING, ERROR, CRITICAL |
| console | æ§åˆ¶å°è¾“å‡ºæ ¼å¼ | "%(asctime)s | %(levelname)-8s | %(message)s" |
| file | æ–‡ä»¶è¾“å‡ºæ ¼å¼ | "%(asctime)s | %(module)s:%(lineno)d | %(message)s" |
| max_size | å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å° | "10MB", "100MB" |
| backup_count | ä¿ç•™çš„æ—§æ—¥å¿—æ–‡ä»¶æ•°é‡ | 5 |
| directory | æ—¥å¿—æ–‡ä»¶å­˜å‚¨ç›®å½• | "./logs", "/app/logs" |
| colored | æ§åˆ¶å°è¾“å‡ºæ˜¯å¦å½©è‰² | true, false |

### Dockerä¸“ç”¨é…ç½®

logging_docker.tomlæ˜¯ä¸ºDockerç¯å¢ƒä¼˜åŒ–çš„é…ç½®æ–‡ä»¶ï¼Œä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š
- å¯ç”¨ç»“æ„åŒ–æ—¥å¿—ï¼ˆJSONæ ¼å¼ï¼‰ä¾¿äºæ—¥å¿—æ”¶é›†
- è®¾ç½®æ›´å¤§çš„æ—¥å¿—æ–‡ä»¶å¤§å°ï¼ˆ100MBï¼‰
- åŒæ—¶è¾“å‡ºåˆ°stdoutå’Œæ–‡ä»¶ï¼Œæ»¡è¶³å®¹å™¨æ—¥å¿—æ”¶é›†éœ€æ±‚
- ä¿®å¤äº†åŸå§‹é…ç½®ä¸­ç¼ºå°‘fileæ ¼å¼çš„é—®é¢˜

**Section sources**
- [logging.toml](file://config/logging.toml)
- [logging_docker.toml](file://config/logging_docker.toml)
- [logging_manager.py](file://tradingagents/utils/logging_manager.py)

## æ—¥å¿—é…ç½®éªŒè¯ä¸è°ƒè¯•æ–¹æ³•

### éªŒè¯æ­¥éª¤

1. **æ£€æŸ¥é…ç½®æ–‡ä»¶å®Œæ•´æ€§**
   ```bash
   # æ£€æŸ¥ä¸»é…ç½®æ–‡ä»¶
   cat config/logging.toml
   
   # æ£€æŸ¥Dockeré…ç½®æ–‡ä»¶
   cat config/logging_docker.toml
   ```
   
2. **è¿è¡Œç®€å•æ—¥å¿—æµ‹è¯•**
   ```bash
   python simple_log_test.py
   ```
   
3. **æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ç”Ÿæˆ**
   ```bash
   # æ£€æŸ¥æ—¥å¿—ç›®å½•
   ls -la logs/
   
   # æŸ¥çœ‹æœ€æ–°æ—¥å¿—
   tail logs/tradingagents.log
   ```

4. **éªŒè¯Dockerç¯å¢ƒæ—¥å¿—**
   ```bash
   # é‡æ–°æ„å»ºé•œåƒ
   docker-compose build
   
   # é‡å¯å®¹å™¨
   docker-compose down && docker-compose up -d
   
   # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
   docker-compose logs web
   ```

### è°ƒè¯•æ–¹æ³•

å½“é‡åˆ°æ—¥å¿—é—®é¢˜æ—¶ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œè°ƒè¯•ï¼š

1. **æ£€æŸ¥è¯­æ³•é”™è¯¯**
   ```bash
   # è¿è¡Œè¯­æ³•æ£€æŸ¥
   python scripts/syntax_checker.py
   ```
   
2. **éªŒè¯æ—¥å¿—é…ç½®åŠ è½½**
   ```python
   # åœ¨ä»£ç ä¸­æ·»åŠ è°ƒè¯•ä¿¡æ¯
   from tradingagents.utils.logging_manager import get_logger_manager
   logger_manager = get_logger_manager()
   print(f"å½“å‰æ—¥å¿—é…ç½®: {logger_manager.config}")
   ```

3. **ä½¿ç”¨è‡ªä¸¾æ—¥å¿—å™¨**
   ```python
   # ä½¿ç”¨è‡ªä¸¾æ—¥å¿—å™¨è¿›è¡Œæ—©æœŸè°ƒè¯•
   from tradingagents.utils.logging_manager import _bootstrap_logger
   _bootstrap_logger.warning("é…ç½®åŠ è½½å‰çš„è­¦å‘Šä¿¡æ¯")
   ```

4. **æ£€æŸ¥ç¯å¢ƒå˜é‡**
   ```bash
   # æ£€æŸ¥å½±å“æ—¥å¿—çš„ç¯å¢ƒå˜é‡
   echo "DOCKER_CONTAINER: $DOCKER_CONTAINER"
   echo "TRADINGAGENTS_LOG_LEVEL: $TRADINGAGENTS_LOG_LEVEL"
   ```

### å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜ç°è±¡ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|--------|---------|
| æ—¥å¿—æ–‡ä»¶æœªç”Ÿæˆ | é…ç½®æ–‡ä»¶ç¼ºå°‘fileæ ¼å¼ | ä½¿ç”¨fix_logging_config_error.pyä¿®å¤ |
| æ§åˆ¶å°æ— å½©è‰²è¾“å‡º | coloredè®¾ç½®ä¸ºfalseæˆ–éttyç¯å¢ƒ | æ£€æŸ¥coloredé…ç½®å’Œè¿è¡Œç¯å¢ƒ |
| Dockerå®¹å™¨æ— æ—¥å¿— | stdout_onlyè®¾ç½®ä¸å½“ | æ£€æŸ¥logging_docker.tomlé…ç½® |
| æ—¥å¿—çº§åˆ«æ— æ³•æ§åˆ¶ | å­˜åœ¨printè¯­å¥ | è¿è¡Œconvert_prints_to_logs.py |
| é‡å¤æ—¥å¿—è¾“å‡º | å¤šæ¬¡å®šä¹‰logger | è¿è¡Œfix_duplicate_loggers.py |

**Section sources**
- [simple_log_test.py](file://scripts/simple_log_test.py)
- [logging_manager.py](file://tradingagents/utils/logging_manager.py)
- [logging_init.py](file://tradingagents/utils/logging_init.py)

## ç»¼åˆä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤æµç¨‹

ä¸ºç¡®ä¿æ—¥å¿—ç³»ç»Ÿçš„å®Œæ•´æ€§å’Œå¯è¯»æ€§ï¼Œå»ºè®®æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ‰§è¡Œä¿®å¤ï¼š

1. **ä¿®å¤è¯­æ³•é”™è¯¯**
   ```bash
   # ä¿®å¤æ‰€æœ‰è¯­æ³•é”™è¯¯æ–‡ä»¶
   # æ ¹æ®syntax_error_files_report.txté€ä¸ªä¿®å¤
   ```

2. **ä¿®å¤æ—¥å¿—é…ç½®**
   ```bash
   # ä¿®å¤æ—¥å¿—é…ç½®æ–‡ä»¶
   python scripts/fix_logging_config_error.py
   ```

3. **ä¿®å¤æ—¥å¿—å¯¼å…¥ä½ç½®**
   ```bash
   # ä¿®å¤æ—¥å¿—å¯¼å…¥ä½ç½®
   python scripts/fix_logging_imports.py
   ```

4. **è½¬æ¢printè¯­å¥**
   ```bash
   # è½¬æ¢printè¯­å¥ä¸ºæ—¥å¿—
   python scripts/convert_prints_to_logs.py
   ```

5. **ä¿®å¤é‡å¤logger**
   ```bash
   # ä¿®å¤é‡å¤loggerå®šä¹‰
   python scripts/fix_duplicate_loggers.py
   ```

6. **éªŒè¯ä¿®å¤ç»“æœ**
   ```bash
   # è¿è¡Œç®€å•æµ‹è¯•
   python simple_log_test.py
   
   # æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
   tail logs/tradingagents.log
   ```

### è‡ªåŠ¨åŒ–ä¿®å¤è„šæœ¬

å¯ä»¥åˆ›å»ºä¸€ä¸ªç»¼åˆä¿®å¤è„šæœ¬automate_fixes.pyï¼ŒæŒ‰æ­£ç¡®é¡ºåºæ‰§è¡Œæ‰€æœ‰ä¿®å¤æ­¥éª¤ï¼š

```python
#!/usr/bin/env python3
"""
è‡ªåŠ¨åŒ–æ—¥å¿—ç³»ç»Ÿä¿®å¤è„šæœ¬
"""

import subprocess
import sys

def run_script(script_name):
    """è¿è¡Œä¿®å¤è„šæœ¬"""
    print(f"ğŸ”§ æ‰§è¡Œ: {script_name}")
    result = subprocess.run([sys.executable, script_name], capture_output=True, text=True)
    if result.returncode == 0:
        print(f"âœ… {script_name} æ‰§è¡ŒæˆåŠŸ")
    else:
        print(f"âŒ {script_name} æ‰§è¡Œå¤±è´¥: {result.stderr}")
    return result.returncode

def main():
    """ä¸»å‡½æ•°"""
    scripts = [
        "scripts/fix_logging_config_error.py",
        "scripts/fix_logging_imports.py",
        "scripts/convert_prints_to_logs.py",
        "scripts/fix_duplicate_loggers.py"
    ]
    
    for script in scripts:
        if run_script(script) != 0:
            print(f"âš ï¸  {script} æ‰§è¡Œå¤±è´¥ï¼Œå»ºè®®æ‰‹åŠ¨æ£€æŸ¥")
    
    print("ğŸ‰ æ—¥å¿—ç³»ç»Ÿä¿®å¤å®Œæˆï¼è¯·è¿è¡Œç®€å•æµ‹è¯•éªŒè¯")

if __name__ == "__main__":
    main()
```

**Section sources**
- [fix_logging_config_error.py](file://scripts/fix_logging_config_error.py)
- [fix_logging_imports.py](file://scripts/fix_logging_imports.py)
- [convert_prints_to_logs.py](file://scripts/convert_prints_to_logs.py)
- [fix_duplicate_loggers.py](file://scripts/fix_duplicate_loggers.py)

## é¢„é˜²æªæ–½ä¸æœ€ä½³å®è·µ

### ä»£ç è§„èŒƒ

1. **å•ä¸€loggeråŸåˆ™**ï¼šæ¯ä¸ªæ–‡ä»¶åªå®šä¹‰ä¸€ä¸ªloggerå®ä¾‹
2. **æ­£ç¡®ä½ç½®**ï¼šloggerå®šä¹‰åº”åœ¨importè¯­å¥å—ä¹‹åï¼Œæ–‡ä»¶é¡¶éƒ¨
3. **é€‚å½“å‘½å**ï¼šæ ¹æ®æ¨¡å—åŠŸèƒ½é€‰æ‹©åˆé€‚çš„loggeråç§°
4. **é¿å…print**ï¼šæ‰€æœ‰è¾“å‡ºéƒ½åº”é€šè¿‡æ—¥å¿—ç³»ç»Ÿ

### é…ç½®ç®¡ç†

1. **é…ç½®æ–‡ä»¶å®Œæ•´æ€§**ï¼šç¡®ä¿æ‰€æœ‰å¿…è¦çš„é…ç½®é¡¹éƒ½å­˜åœ¨
2. **ç¯å¢ƒåŒºåˆ†**ï¼šä¸ºä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€ç”Ÿäº§ã€Dockerï¼‰æä¾›ä¸“ç”¨é…ç½®
3. **ç‰ˆæœ¬æ§åˆ¶**ï¼šå°†é…ç½®æ–‡ä»¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œè·Ÿè¸ªå˜æ›´

### å¼€å‘æµç¨‹

1. **é¢„æäº¤æ£€æŸ¥**ï¼šåœ¨æäº¤ä»£ç å‰è¿è¡Œæ—¥å¿—ç›¸å…³æ£€æŸ¥
2. **ä»£ç å®¡æŸ¥**ï¼šåœ¨ä»£ç å®¡æŸ¥ä¸­ç‰¹åˆ«å…³æ³¨æ—¥å¿—ç›¸å…³çš„å˜æ›´
3. **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šåŒ…å«æ—¥å¿—åŠŸèƒ½çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

### ç›‘æ§ä¸ç»´æŠ¤

1. **å®šæœŸæ£€æŸ¥**ï¼šå®šæœŸè¿è¡Œæ—¥å¿—ç³»ç»Ÿå¥åº·æ£€æŸ¥
2. **æ—¥å¿—è½®è½¬**ï¼šç¡®ä¿æ—¥å¿—æ–‡ä»¶ä¸ä¼šæ— é™å¢é•¿
3. **é”™è¯¯ç›‘æ§**ï¼šç›‘æ§æ—¥å¿—ç³»ç»Ÿè‡ªèº«çš„é”™è¯¯å’Œè­¦å‘Š

é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µï¼Œå¯ä»¥ç¡®ä¿æ—¥å¿—ç³»ç»Ÿçš„é•¿æœŸç¨³å®šè¿è¡Œï¼Œä¸ºç³»ç»Ÿçš„è°ƒè¯•ã€ç›‘æ§å’Œç»´æŠ¤æä¾›å¯é çš„æ”¯æŒã€‚

**Section sources**
- [logging_manager.py](file://tradingagents/utils/logging_manager.py)
- [logging_init.py](file://tradingagents/utils/logging_init.py)
- [logging.toml](file://config/logging.toml)