# ç ”ç©¶å›¢é˜Ÿ

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**  
- [bull_researcher.py](file://tradingagents/agents/researchers/bull_researcher.py)
- [bear_researcher.py](file://tradingagents/agents/researchers/bear_researcher.py)
- [research_manager.py](file://tradingagents/agents/managers/research_manager.py)
- [setup.py](file://tradingagents/graph/setup.py)
- [conditional_logic.py](file://tradingagents/graph/conditional_logic.py)
- [agent_states.py](file://tradingagents/agents/utils/agent_states.py)
</cite>

## ç›®å½•
1. [å¼•è¨€](#å¼•è¨€)
2. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
3. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
4. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
5. [ä¾èµ–å…³ç³»åˆ†æ](#ä¾èµ–å…³ç³»åˆ†æ)

## å¼•è¨€
æœ¬æ–‡æ¡£å…¨é¢é˜è¿°äº†ç‰›ç†Šç ”ç©¶å‘˜ä¸ç ”ç©¶ç»ç†çš„ååŒå·¥ä½œæœºåˆ¶ã€‚è¯¥æœºåˆ¶é‡‡ç”¨â€œçº¢é˜Ÿ-è“é˜Ÿâ€è¾©è®ºå¼ç ”ç©¶æµç¨‹ï¼Œé€šè¿‡çœ‹æ¶¨ç ”ç©¶å‘˜ï¼ˆbull_researcherï¼‰å’Œçœ‹è·Œç ”ç©¶å‘˜ï¼ˆbear_researcherï¼‰åŸºäºå¯¹ç«‹å‡è®¾è¿›è¡Œç‹¬ç«‹åˆ†æï¼Œç”Ÿæˆå¤šè§†è§’æŠ•èµ„è§‚ç‚¹ã€‚ç ”ç©¶ç»ç†ï¼ˆresearch_managerï¼‰è´Ÿè´£æ•´åˆåŒæ–¹è¾“å‡ºï¼Œè¯„ä¼°è¯æ®å¼ºåº¦ï¼Œå¹¶åšå‡ºæœ€ç»ˆç ”ç©¶ç»“è®ºã€‚æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†æ™ºèƒ½ä½“é—´çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€çŠ¶æ€åŒæ­¥æ–¹å¼ä»¥åŠåœ¨LangGraphä¸­çš„èŠ‚ç‚¹è°ƒç”¨é¡ºåºï¼Œç¡®ä¿å¼€å‘è€…ç†è§£è¯¥å›¢é˜Ÿåœ¨æ•´ä½“å†³ç­–é“¾ä¸­çš„ä½œç”¨ã€‚

## æ ¸å¿ƒç»„ä»¶

æœ¬ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬çœ‹æ¶¨ç ”ç©¶å‘˜ã€çœ‹è·Œç ”ç©¶å‘˜å’Œç ”ç©¶ç»ç†ã€‚çœ‹æ¶¨ç ”ç©¶å‘˜è´Ÿè´£æ„å»ºæ”¯æŒæŠ•èµ„çš„å¼ºæœ‰åŠ›è®ºè¯ï¼Œå¼ºè°ƒå¢é•¿æ½œåŠ›ã€ç«äº‰ä¼˜åŠ¿å’Œç§¯ææŒ‡æ ‡ï¼›çœ‹è·Œç ”ç©¶å‘˜åˆ™ä¸“æ³¨äºæ­ç¤ºé£é™©ã€æŒ‘æˆ˜å’Œè´Ÿé¢å› ç´ ï¼Œåé©³çœ‹æ¶¨è§‚ç‚¹ã€‚ç ”ç©¶ç»ç†ä½œä¸ºå†³ç­–è€…ï¼Œæ‰¹åˆ¤æ€§è¯„ä¼°åŒæ–¹è®ºç‚¹ï¼Œæ•´åˆä¿¡æ¯å¹¶ç”Ÿæˆæœ€ç»ˆçš„æŠ•èµ„å»ºè®®ä¸è¯¦ç»†è®¡åˆ’ã€‚

**Section sources**
- [bull_researcher.py](file://tradingagents/agents/researchers/bull_researcher.py#L5-L91)
- [bear_researcher.py](file://tradingagents/agents/researchers/bear_researcher.py#L5-L83)
- [research_manager.py](file://tradingagents/agents/managers/research_manager.py#L4-L80)

## æ¶æ„æ¦‚è§ˆ

è¯¥ç ”ç©¶å›¢é˜Ÿçš„æ¶æ„åŸºäºLangGraphæ„å»ºï¼Œå½¢æˆä¸€ä¸ªæœ‰åºçš„å†³ç­–æµç¨‹ã€‚é¦–å…ˆï¼Œå¤šä¸ªåˆ†æå¸ˆèŠ‚ç‚¹ï¼ˆå¸‚åœºã€æƒ…ç»ªã€æ–°é—»ã€åŸºæœ¬é¢ï¼‰ä¾æ¬¡æ‰§è¡Œï¼Œç”Ÿæˆå„è‡ªçš„æŠ¥å‘Šã€‚éšåï¼Œæµç¨‹è¿›å…¥â€œçº¢é˜Ÿ-è“é˜Ÿâ€è¾©è®ºé˜¶æ®µï¼Œç”±çœ‹æ¶¨ç ”ç©¶å‘˜å’Œçœ‹è·Œç ”ç©¶å‘˜äº¤æ›¿è¿›è¡Œå¤šè½®è®ºè¯ã€‚æœ€åï¼Œç ”ç©¶ç»ç†èŠ‚ç‚¹ä»‹å…¥ï¼Œæ€»ç»“è¾©è®ºå†…å®¹ï¼Œåšå‡ºæ˜ç¡®çš„æŠ•èµ„å†³ç­–ï¼Œå¹¶ä¸ºäº¤æ˜“å‘˜åˆ¶å®šè¯¦ç»†çš„æŠ•èµ„è®¡åˆ’ã€‚

```mermaid
graph TB
subgraph "åˆ†æé˜¶æ®µ"
Market[å¸‚åœºåˆ†æå¸ˆ]
Sentiment[ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ]
News[æ–°é—»åˆ†æå¸ˆ]
Fundamentals[åŸºæœ¬é¢åˆ†æå¸ˆ]
end
subgraph "è¾©è®ºé˜¶æ®µ"
Bull[çœ‹æ¶¨ç ”ç©¶å‘˜]
Bear[çœ‹è·Œç ”ç©¶å‘˜]
end
subgraph "å†³ç­–é˜¶æ®µ"
Manager[ç ”ç©¶ç»ç†]
Trader[äº¤æ˜“å‘˜]
end
Market --> Sentiment --> News --> Fundamentals --> Bull
Bull --> Bear
Bear --> Bull
Bull --> Manager
Bear --> Manager
Manager --> Trader
style Bull fill:#f9f,stroke:#333
style Bear fill:#bbf,stroke:#333
style Manager fill:#f96,stroke:#333
```

**Diagram sources**
- [setup.py](file://tradingagents/graph/setup.py#L14-L248)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### çœ‹æ¶¨ç ”ç©¶å‘˜åˆ†æ
çœ‹æ¶¨ç ”ç©¶å‘˜èŠ‚ç‚¹æ¥æ”¶å¸‚åœºã€æƒ…ç»ªã€æ–°é—»å’ŒåŸºæœ¬é¢æŠ¥å‘Šï¼Œæ„å»ºæ”¯æŒæŠ•èµ„çš„è®ºç‚¹ã€‚å…¶æ ¸å¿ƒä»»åŠ¡æ˜¯å¼ºè°ƒå…¬å¸çš„å¢é•¿æ½œåŠ›ã€ç«äº‰ä¼˜åŠ¿å’Œç§¯æçš„å¸‚åœºæŒ‡æ ‡ï¼Œå¹¶ç›´æ¥å›åº”å’Œåé©³çœ‹è·Œç ”ç©¶å‘˜çš„è§‚ç‚¹ã€‚è¯¥èŠ‚ç‚¹ä¼šæ£€ç´¢å†å²è®°å¿†ä»¥å¸å–è¿‡å»çš„ç»éªŒæ•™è®­ï¼Œä»è€Œå®Œå–„å…¶è®ºè¯ã€‚

```mermaid
flowchart TD
Start([å¼€å§‹]) --> ReceiveReports["æ¥æ”¶å¸‚åœºã€æƒ…ç»ªã€æ–°é—»ã€åŸºæœ¬é¢æŠ¥å‘Š"]
ReceiveReports --> CheckStockType["æ£€æŸ¥è‚¡ç¥¨ç±»å‹ (Aè‚¡/æµ·å¤–)"]
CheckStockType --> RetrieveMemory["æ£€ç´¢å†å²è®°å¿†"]
RetrieveMemory --> ConstructArgument["æ„å»ºçœ‹æ¶¨è®ºç‚¹"]
ConstructArgument --> FocusAreas["å…³æ³¨: å¢é•¿æ½œåŠ›, ç«äº‰ä¼˜åŠ¿, ç§¯ææŒ‡æ ‡"]
FocusAreas --> RefuteBear["åé©³çœ‹è·Œè§‚ç‚¹"]
RefuteBear --> UpdateState["æ›´æ–°è¾©è®ºçŠ¶æ€"]
UpdateState --> End([ç»“æŸ])
```

**Diagram sources**
- [bull_researcher.py](file://tradingagents/agents/researchers/bull_researcher.py#L5-L91)

**Section sources**
- [bull_researcher.py](file://tradingagents/agents/researchers/bull_researcher.py#L5-L91)

### çœ‹è·Œç ”ç©¶å‘˜åˆ†æ
çœ‹è·Œç ”ç©¶å‘˜èŠ‚ç‚¹ä¸çœ‹æ¶¨ç ”ç©¶å‘˜ç›¸å¯¹ï¼Œå…¶ä»»åŠ¡æ˜¯è®ºè¯ä¸æŠ•èµ„çš„ç†ç”±ã€‚å®ƒä¼šçªå‡ºé£é™©ã€æŒ‘æˆ˜ã€ç«äº‰åŠ£åŠ¿å’Œè´Ÿé¢æŒ‡æ ‡ï¼Œå¹¶ç”¨å…·ä½“æ•°æ®å’Œæ¨ç†æ¥æ‰¹åˆ¤æ€§åœ°åˆ†æå’Œåé©³çœ‹æ¶¨è®ºç‚¹ã€‚åŒæ ·ï¼Œè¯¥èŠ‚ç‚¹ä¹Ÿä¼šåˆ©ç”¨å†å²è®°å¿†æ¥é¿å…è¿‡å»çš„é”™è¯¯ã€‚

```mermaid
flowchart TD
Start([å¼€å§‹]) --> ReceiveReports["æ¥æ”¶å¸‚åœºã€æƒ…ç»ªã€æ–°é—»ã€åŸºæœ¬é¢æŠ¥å‘Š"]
ReceiveReports --> CheckStockType["æ£€æŸ¥è‚¡ç¥¨ç±»å‹ (Aè‚¡/æµ·å¤–)"]
CheckStockType --> RetrieveMemory["æ£€ç´¢å†å²è®°å¿†"]
RetrieveMemory --> ConstructArgument["æ„å»ºçœ‹è·Œè®ºç‚¹"]
ConstructArgument --> FocusAreas["å…³æ³¨: é£é™©æŒ‘æˆ˜, ç«äº‰åŠ£åŠ¿, è´Ÿé¢æŒ‡æ ‡"]
FocusAreas --> RefuteBull["åé©³çœ‹æ¶¨è§‚ç‚¹"]
RefuteBull --> UpdateState["æ›´æ–°è¾©è®ºçŠ¶æ€"]
UpdateState --> End([ç»“æŸ])
```

**Diagram sources**
- [bear_researcher.py](file://tradingagents/agents/researchers/bear_researcher.py#L5-L83)

**Section sources**
- [bear_researcher.py](file://tradingagents/agents/researchers/bear_researcher.py#L5-L83)

### ç ”ç©¶ç»ç†åˆ†æ
ç ”ç©¶ç»ç†èŠ‚ç‚¹æ˜¯æ•´ä¸ªç ”ç©¶æµç¨‹çš„å†³ç­–æ ¸å¿ƒã€‚å®ƒæ¥æ”¶çœ‹æ¶¨å’Œçœ‹è·Œç ”ç©¶å‘˜çš„å®Œæ•´è¾©è®ºå†å²ï¼Œè¿›è¡Œæ‰¹åˆ¤æ€§è¯„ä¼°ã€‚å…¶å†³ç­–é€»è¾‘ä¸ä»…æ€»ç»“åŒæ–¹è§‚ç‚¹ï¼Œè¿˜å¿…é¡»åŸºäºæœ€å¼ºæœ‰åŠ›çš„è®ºç‚¹åšå‡ºæ˜ç¡®çš„â€œä¹°å…¥â€ã€â€œå–å‡ºâ€æˆ–â€œæŒæœ‰â€çš„æ‰¿è¯ºï¼Œé¿å…æ— æ„ä¹‰çš„ä¸­ç«‹ã€‚å†³ç­–è¾“å‡ºåŒ…å«å…·ä½“çš„æŠ•èµ„å»ºè®®ã€ç†ç”±ã€æˆ˜ç•¥è¡ŒåŠ¨å’Œå…³é”®çš„ğŸ“Šç›®æ ‡ä»·æ ¼åˆ†æã€‚

```mermaid
flowchart TD
Start([å¼€å§‹]) --> ReceiveDebate["æ¥æ”¶å®Œæ•´è¾©è®ºå†å²"]
ReceiveDebate --> RetrieveMemory["æ£€ç´¢å†å²é”™è¯¯åæ€"]
RetrieveMemory --> Evaluate["è¯„ä¼°åŒæ–¹è®ºç‚¹å¼ºåº¦"]
Evaluate --> Summarize["æ€»ç»“å…³é”®è§‚ç‚¹"]
Summarize --> MakeDecision["åšå‡ºæ˜ç¡®å†³ç­–: ä¹°å…¥/å–å‡º/æŒæœ‰"]
MakeDecision --> CreatePlan["åˆ¶å®šè¯¦ç»†æŠ•èµ„è®¡åˆ’"]
CreatePlan --> TargetPrice["ğŸ“Š ç›®æ ‡ä»·æ ¼åˆ†æ: æä¾›å…·ä½“ä»·æ ¼ç›®æ ‡"]
TargetPrice --> Output["è¾“å‡ºæœ€ç»ˆå†³ç­–ä¸è®¡åˆ’"]
Output --> End([ç»“æŸ])
```

**Diagram sources**
- [research_manager.py](file://tradingagents/agents/managers/research_manager.py#L4-L80)

**Section sources**
- [research_manager.py](file://tradingagents/agents/managers/research_manager.py#L4-L80)

## ä¾èµ–å…³ç³»åˆ†æ

è¯¥ç ”ç©¶å›¢é˜Ÿçš„å„ä¸ªç»„ä»¶é€šè¿‡LangGraphçš„çŠ¶æ€æœºï¼ˆAgentStateï¼‰ç´§å¯†è€¦åˆã€‚çŠ¶æ€æœºä¸­çš„`investment_debate_state`å­—æ®µæ˜¯æ ¸å¿ƒï¼Œå®ƒåŒ…å«äº†`bull_history`ã€`bear_history`å’Œ`history`ï¼Œç”¨äºåœ¨çœ‹æ¶¨å’Œçœ‹è·Œç ”ç©¶å‘˜ä¹‹é—´ä¼ é€’å’Œç´¯ç§¯ä¿¡æ¯ã€‚ç ”ç©¶ç»ç†èŠ‚ç‚¹ä¾èµ–äºè¿™ä¸ªç´¯ç§¯çš„è¾©è®ºå†å²å’Œæ‰€æœ‰åŸºç¡€æŠ¥å‘Šï¼ˆmarket_report, sentiment_reportç­‰ï¼‰æ¥åšå‡ºæœ€ç»ˆåˆ¤æ–­ã€‚

èŠ‚ç‚¹é—´çš„è°ƒç”¨é¡ºåºç”±`conditional_logic.py`ä¸­çš„æ¡ä»¶å‡½æ•°ä¸¥æ ¼æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œ`should_continue_debate`å‡½æ•°æ ¹æ®è¾©è®ºè½®æ¬¡è®¡æ•°ï¼ˆcountï¼‰å’Œæœ€åå‘è¨€è€…æ¥å†³å®šæµç¨‹æ˜¯ç»§ç»­åœ¨ç‰›ç†Šä¹‹é—´å¾ªç¯ï¼Œè¿˜æ˜¯å°†æ§åˆ¶æƒç§»äº¤ç»™ç ”ç©¶ç»ç†ã€‚

```mermaid
erDiagram
AgentState ||--o{ InvestDebateState : åŒ…å«
AgentState ||--|| MarketReport : åŒ…å«
AgentState ||--|| SentimentReport : åŒ…å«
AgentState ||--|| NewsReport : åŒ…å«
AgentState ||--|| FundamentalsReport : åŒ…å«
class AgentState {
+string company_of_interest
+string trade_date
+InvestDebateState investment_debate_state
+string market_report
+string sentiment_report
+string news_report
+string fundamentals_report
}
class InvestDebateState {
+string bull_history
+string bear_history
+string history
+string current_response
+int count
}
class MarketReport {
+string content
}
class SentimentReport {
+string content
}
class NewsReport {
+string content
}
class FundamentalsReport {
+string content
}
```

**Diagram sources**
- [agent_states.py](file://tradingagents/agents/utils/agent_states.py#L10-L75)
- [setup.py](file://tradingagents/graph/setup.py#L14-L248)
- [conditional_logic.py](file://tradingagents/graph/conditional_logic.py#L45-L54)

**Section sources**
- [agent_states.py](file://tradingagents/agents/utils/agent_states.py#L10-L75)
- [setup.py](file://tradingagents/graph/setup.py#L14-L248)
- [conditional_logic.py](file://tradingagents/graph/conditional_logic.py#L45-L54)