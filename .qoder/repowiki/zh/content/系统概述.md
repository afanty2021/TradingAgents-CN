
# ç³»ç»Ÿæ¦‚è¿°

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨æ–‡ä»¶**  
- [README.md](file://README.md)
- [tradingagents/graph/trading_graph.py](file://tradingagents/graph/trading_graph.py)
- [tradingagents/agents/utils/agent_utils.py](file://tradingagents/agents/utils/agent_utils.py)
- [tradingagents/dataflows/interface.py](file://tradingagents/dataflows/interface.py)
- [tradingagents/dataflows/data_source_manager.py](file://tradingagents/dataflows/data_source_manager.py)
- [tradingagents/dataflows/tushare_adapter.py](file://tradingagents/dataflows/tushare_adapter.py)
- [tradingagents/dataflows/tushare_utils.py](file://tradingagents/dataflows/tushare_utils.py)
- [web/app.py](file://web/app.py)
- [cli/main.py](file://cli/main.py)
- [tradingagents/default_config.py](file://tradingagents/default_config.py)
- [docker-compose.yml](file://docker-compose.yml)
- [pyproject.toml](file://pyproject.toml)
</cite>

## ç›®å½•
1. [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
2. [æ ¸å¿ƒåŠŸèƒ½ä¸æ¶æ„è®¾è®¡](#æ ¸å¿ƒåŠŸèƒ½ä¸æ¶æ„è®¾è®¡)
3. [æŠ€æœ¯æ ˆä¸å…¨æ ˆç‰¹æ€§](#æŠ€æœ¯æ ˆä¸å…¨æ ˆç‰¹æ€§)
4. [å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ¶æ„](#å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ¶æ„)
5. [LLMæ¨¡å‹é›†æˆ](#llmæ¨¡å‹é›†æˆ)
6. [æ•°æ®æºé›†æˆ](#æ•°æ®æºé›†æˆ)
7. [å­˜å‚¨ä¸ç¼“å­˜æœºåˆ¶](#å­˜å‚¨ä¸ç¼“å­˜æœºåˆ¶)
8. [ç”¨æˆ·ç•Œé¢ä¸äº¤äº’](#ç”¨æˆ·ç•Œé¢ä¸äº¤äº’)
9. [å…¸å‹å·¥ä½œæµç¤ºä¾‹](#å…¸å‹å·¥ä½œæµç¤ºä¾‹)
10. [è®¾è®¡å“²å­¦ä¸é€‚ç”¨åœºæ™¯](#è®¾è®¡å“²å­¦ä¸é€‚ç”¨åœºæ™¯)
11. [éƒ¨ç½²ä¸è¿ç»´](#éƒ¨ç½²ä¸è¿ç»´)
12. [æ€»ç»“](#æ€»ç»“)

## é¡¹ç›®ç®€ä»‹

TradingAgents-CN æ˜¯ä¸€ä¸ªåŸºäºå¤šæ™ºèƒ½ä½“å¤§è¯­è¨€æ¨¡å‹çš„ä¸­æ–‡é‡‘èäº¤æ˜“å†³ç­–æ¡†æ¶ï¼Œä¸“ä¸ºä¸­æ–‡ç”¨æˆ·ä¼˜åŒ–ã€‚è¯¥é¡¹ç›®åœ¨ [TauricResearch/TradingAgents](https://github.com/TauricResearch/TradingAgents) åŸºç¡€ä¸Šè¿›è¡Œæ·±åº¦å¢å¼ºï¼Œæä¾›å®Œæ•´çš„ä¸­æ–‡æ”¯æŒã€Aè‚¡å¸‚åœºé€‚é…ã€å›½äº§å¤§æ¨¡å‹é›†æˆå’Œç°ä»£åŒ–Webç•Œé¢ã€‚

æœ¬é¡¹ç›®æ—¨åœ¨æ­å»ºAIæŠ€æœ¯ä¸ä¸­å›½é‡‘èå¸‚åœºçš„æ¡¥æ¢ï¼Œé€šè¿‡å¤šæ™ºèƒ½ä½“åä½œæ¶æ„æ¨¡æ‹Ÿä¸“ä¸šæŠ•èµ„å›¢é˜Ÿçš„å†³ç­–æµç¨‹ï¼Œä¸ºç”¨æˆ·æä¾›å…¨é¢çš„è‚¡ç¥¨åˆ†æä¸æŠ•èµ„å»ºè®®ã€‚ç³»ç»Ÿé‡‡ç”¨å…ˆè¿›çš„LangChain/LangGraphæ¡†æ¶æ„å»ºæ™ºèƒ½ä½“ç½‘ç»œï¼Œç»“åˆå¤šç§æ•°æ®æºå’Œå¤§è¯­è¨€æ¨¡å‹ï¼Œå®ç°ä»æ•°æ®é‡‡é›†ã€åˆ†æåˆ°å†³ç­–çš„å®Œæ•´é—­ç¯ã€‚

**Section sources**
- [README.md](file://README.md#L1-L1257)

## æ ¸å¿ƒåŠŸèƒ½ä¸æ¶æ„è®¾è®¡

TradingAgents-CN é‡‡ç”¨æ¨¡å—åŒ–ã€å¾®æœåŠ¡åŒ–çš„æ¶æ„è®¾è®¡ï¼Œæ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬å¤šæ™ºèƒ½ä½“åä½œã€å¤šLLMæ”¯æŒã€å¤šæ•°æ®æºé›†æˆå’Œä¸“ä¸šæŠ¥å‘Šå¯¼å‡ºã€‚ç³»ç»Ÿé€šè¿‡æ™ºèƒ½ä½“å›¢é˜Ÿçš„åˆ†å·¥åä½œï¼Œæ¨¡æ‹ŸçœŸå®æŠ•èµ„å…¬å¸çš„ç ”ç©¶æµç¨‹ï¼Œç¡®ä¿åˆ†æçš„å…¨é¢æ€§å’Œå†³ç­–çš„ç§‘å­¦æ€§ã€‚

æ¶æ„è®¾è®¡éµå¾ªé«˜å†…èšã€ä½è€¦åˆåŸåˆ™ï¼Œå„æ¨¡å—é€šè¿‡æ¸…æ™°çš„æ¥å£è¿›è¡Œé€šä¿¡ã€‚ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„ï¼ŒåŒ…æ‹¬æ•°æ®å±‚ã€æœåŠ¡å±‚ã€æ™ºèƒ½ä½“å±‚å’Œåº”ç”¨å±‚ï¼Œç¡®ä¿ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚é€šè¿‡é…ç½®åŒ–ç®¡ç†ï¼Œç”¨æˆ·å¯ä»¥çµæ´»è°ƒæ•´æ™ºèƒ½ä½“ç»„åˆã€LLMæ¨¡å‹å’Œæ•°æ®æºï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚

**Section sources**
- [README.md](file://README.md#L1-L1257)
- [tradingagents/graph/trading_graph.py](file://tradingagents/graph/trading_graph.py#L32-L325)

## æŠ€æœ¯æ ˆä¸å…¨æ ˆç‰¹æ€§

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯é¢†åŸŸ | ä½¿ç”¨æŠ€æœ¯ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|---------|--------|--------|------|
| **æ ¸å¿ƒè¯­è¨€** | Python | 3.10+ | å¼‚æ­¥å¤„ç†ï¼Œå¤šçº¿ç¨‹æ”¯æŒ |
| **AIæ¡†æ¶** | LangChain, LangGraph | æœ€æ–°ç‰ˆ | æ™ºèƒ½ä½“ç¼–æ’ï¼Œå·¥å…·è°ƒç”¨ |
| **Webç•Œé¢** | Streamlit | 1.28+ | å“åº”å¼è®¾è®¡ï¼Œå®æ—¶æ›´æ–° |
| **æ•°æ®åº“** | MongoDB, Redis | 4.4+, 6.0+ | åˆ†å¸ƒå¼å­˜å‚¨ï¼Œæ¯«ç§’çº§ç¼“å­˜ |
| **æ•°æ®å¤„ç†** | Pandas, NumPy | æœ€æ–°ç‰ˆ | å‘é‡åŒ–è®¡ç®—ï¼Œå†…å­˜ä¼˜åŒ– |
| **APIé›†æˆ** | é€šè¾¾ä¿¡API, FinnHub, Google News | - | å¹¶å‘è¯·æ±‚ï¼Œæ™ºèƒ½é™æµ |
| **LLMæ”¯æŒ** | DeepSeek V3, é˜¿é‡Œç™¾ç‚¼, Google AI, OpenAI | - | æ™ºèƒ½è·¯ç”±ï¼Œæˆæœ¬ä¼˜åŒ– |
| **å®¹å™¨åŒ–** | Docker, Docker Compose | 20.0+ | å¾®æœåŠ¡æ¶æ„ï¼Œå¼¹æ€§æ‰©å±• |
| **æ–‡æ¡£è½¬æ¢** | Pandoc, wkhtmltopdf | æœ€æ–°ç‰ˆ | å¤šæ ¼å¼æ”¯æŒï¼Œæ‰¹é‡å¤„ç† |

### å…¨æ ˆç‰¹æ€§

TradingAgents-CN å…·å¤‡å®Œæ•´çš„å…¨æ ˆç‰¹æ€§ï¼Œæ¶µç›–ä»åº•å±‚æ•°æ®å­˜å‚¨åˆ°ä¸Šå±‚ç”¨æˆ·ç•Œé¢çš„å„ä¸ªå±‚é¢ï¼š

- **CLIå·¥å…·**: æä¾›å‘½ä»¤è¡Œæ¥å£ï¼Œæ”¯æŒè„šæœ¬åŒ–è°ƒç”¨å’Œè‡ªåŠ¨åŒ–åˆ†æ
- **Webç•Œé¢**: åŸºäºStreamlitçš„ç°ä»£åŒ–Webåº”ç”¨ï¼Œæ”¯æŒå®æ—¶äº¤äº’å’Œæ•°æ®å¯è§†åŒ–
- **å¤šLLMæ”¯æŒ**: é›†æˆé˜¿é‡Œç™¾ç‚¼ã€DeepSeekã€Google AIç­‰å¤šç§å¤§è¯­è¨€æ¨¡å‹
- **å¤šæ•°æ®æºé›†æˆ**: æ”¯æŒTushareã€AkShareã€FinnHubã€Yahoo Financeç­‰æ•°æ®æº
- **Dockerå®¹å™¨åŒ–**: æä¾›å®Œæ•´çš„Docker Composeé…ç½®ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²

```mermaid
graph TD
subgraph "å‰ç«¯"
A[CLIå·¥å…·]
B[Webç•Œé¢]
end
subgraph "åç«¯"
C[äº¤æ˜“æ™ºèƒ½ä½“å›¾]
D[LLMé€‚é…å™¨]
E[æ•°æ®æµæœåŠ¡]
end
subgraph "æ•°æ®å±‚"
F[MongoDB]
G[Redis]
H[æœ¬åœ°æ–‡ä»¶]
end
A --> C
B --> C
C --> D
C --> E
E --> F
E --> G
E --> H
```

**Diagram sources**
- [web/app.py](file://web/app.py)
- [cli/main.py](file://cli/main.py)
- [tradingagents/graph/trading_graph.py](file://tradingagents/graph/trading_graph.py)
- [tradingagents/dataflows/interface.py](file://tradingagents/dataflows/interface.py)

**Section sources**
- [README.md](file://README.md#L1-L1257)
- [pyproject.toml](file://pyproject.toml)

## å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ¶æ„

### æ™ºèƒ½ä½“å›¢é˜Ÿæ„æˆ

TradingAgents-CN é‡‡ç”¨å¤šæ™ºèƒ½ä½“åä½œæ¶æ„ï¼Œæ¨¡æ‹Ÿä¸“ä¸šæŠ•èµ„å›¢é˜Ÿçš„å·¥ä½œæµç¨‹ã€‚å„æ™ºèƒ½ä½“åˆ†å·¥æ˜ç¡®ï¼ŒååŒå·¥ä½œï¼Œç¡®ä¿åˆ†æçš„å…¨é¢æ€§å’Œå†³ç­–çš„ç§‘å­¦æ€§ã€‚

```mermaid
classDiagram
class MarketAnalyst {
+analyze_technical_indicators()
+evaluate_price_trends()
+assess_volume_patterns()
}
class FundamentalsAnalyst {
+analyze_financial_statements()
+evaluate_valuation_metrics()
+compare_industry_peers()
}
class NewsAnalyst {
+analyze_news_sentiment()
+assess_event_impact()
+monitor_market_sentiment()
}
class SocialMediaAnalyst {
+analyze_social_sentiment()
+monitor_investor_mood()
+track_hot_topics()
}
class BullResearcher {
+argue_bull_case()
+identify_growth_opportunities()
+assess_upside_potential()
}
class BearResearcher {
+argue_bear_case()
+identify_risks()
+assess_downside_risks()
}
class Trader {
+make_final_decision()
+recommend_position_size()
+set_stop_loss_take_profit()
}
class RiskManager {
+assess_risk_level()
+recommend_risk_controls()
+evaluate_portfolio_impact()
}
class ResearchManager {
+coordinate_team()
+ensure_quality_control()
+approve_final_report()
}
MarketAnalyst --> Trader : "æä¾›æŠ€æœ¯åˆ†æ"
FundamentalsAnalyst --> Trader : "æä¾›åŸºæœ¬é¢åˆ†æ"
NewsAnalyst --> Trader : "æä¾›æ–°é—»åˆ†æ"
SocialMediaAnalyst --> Trader : "æä¾›æƒ…ç»ªåˆ†æ"
BullResearcher --> Trader : "æä¾›çœ‹æ¶¨è®ºè¯"
BearResearcher --> Trader : "æä¾›çœ‹è·Œè®ºè¯"
RiskManager --> Trader : "æä¾›é£é™©è¯„ä¼°"
ResearchManager --> Trader : "æä¾›æœ€ç»ˆå®¡æ ¸"
```

**Diagram sources**
- [tradingagents/agents/analysts/market_analyst.py](file://tradingagents/agents/analysts/market_analyst.py)
- [tradingagents/agents/analysts/fundamentals_analyst.py](file://tradingagents/agents/analysts/fundamentals_analyst.py)
- [tradingagents/agents/analysts/news_analyst.py](file://tradingagents/agents/analysts/news_analyst.py)
- [tradingagents/agents/analysts/social_media_analyst.py](file://tradingagents/agents/analysts/social_media_analyst.py)
- [tradingagents/agents/researchers/bull_researcher.py](file://tradingagents/agents/researchers/bull_researcher.py)
- [tradingagents/agents/researchers/bear_researcher.py](file://tradingagents/agents/researchers/bear_researcher.py)
- [tradingagents/agents/trader/trader.py](file://tradingagents/agents/trader/trader.py)
- [tradingagents/agents/managers/risk_manager.py](file://tradingagents/agents/managers/risk_manager.py)
- [tradingagents/agents/managers/research_manager.py](file://tradingagents/agents/managers/research_manager.py)

### æ™ºèƒ½ä½“åä½œæµç¨‹

```mermaid
sequenceDiagram
participant User as "ç”¨æˆ·"
participant TA as "äº¤æ˜“æ™ºèƒ½ä½“å›¾"
participant MA as "å¸‚åœºåˆ†æå¸ˆ"
participant FA as "åŸºæœ¬é¢åˆ†æå¸ˆ"
participant NA as "æ–°é—»åˆ†æå¸ˆ"
participant SA as "æƒ…ç»ªåˆ†æå¸ˆ"
participant BR as "çœ‹æ¶¨ç ”ç©¶å‘˜"
participant BR as "çœ‹è·Œç ”ç©¶å‘˜"
participant RM as "é£é™©ç®¡ç†å‘˜"
participant T as "äº¤æ˜“å‘˜"
User->>TA : å‘èµ·åˆ†æè¯·æ±‚
TA->>MA : è¯·æ±‚æŠ€æœ¯åˆ†æ
TA->>FA : è¯·æ±‚åŸºæœ¬é¢åˆ†æ
TA->>NA : è¯·æ±‚æ–°é—»åˆ†æ
TA->>SA : è¯·æ±‚æƒ…ç»ªåˆ†æ
MA-->>TA : è¿”å›æŠ€æœ¯åˆ†æç»“æœ
FA-->>TA : è¿”å›åŸºæœ¬é¢åˆ†æç»“æœ
NA-->>TA : è¿”å›æ–°é—»åˆ†æç»“æœ
SA-->>TA : è¿”å›æƒ…ç»ªåˆ†æç»“æœ
TA->>BR : å‘èµ·çœ‹æ¶¨è®ºè¯
TA->>BR : å‘èµ·çœ‹è·Œè®ºè¯
BR-->>TA : è¿”å›çœ‹æ¶¨è®ºè¯
BR-->>TA : è¿”å›çœ‹è·Œè®ºè¯
TA->>RM : è¯·æ±‚é£é™©è¯„ä¼°
RM-->>TA : è¿”å›é£é™©è¯„ä¼°
TA->>T : ç»¼åˆæ‰€æœ‰ä¿¡æ¯
T-->>TA : è¿”å›æœ€ç»ˆå†³ç­–
TA-->>User : è¿”å›å®Œæ•´åˆ†ææŠ¥å‘Š
```

**Diagram sources**
- [tradingagents/graph/trading_graph.py](file://tradingagents/graph/trading_graph.py#L32-L325)
- [tradingagents/agents/utils/agent_utils.py](file://tradingagents/agents/utils/agent_utils.py)

**Section sources**
- [tradingagents/graph/trading_graph.py](file://tradingagents/graph/trading_graph.py#L32-L325)
- [tradingagents/agents/utils/agent_utils.py](file://tradingagents/agents/utils/agent_utils.py)

## LLMæ¨¡å‹é›†æˆ

### æ”¯æŒçš„LLMæ¨¡å‹

TradingAgents-CN æ”¯æŒå¤šç§å¤§è¯­è¨€æ¨¡å‹ï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±æœºåˆ¶è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆä»»åŠ¡çš„æ¨¡å‹ï¼Œå®ç°æ€§èƒ½å’Œæˆæœ¬çš„æœ€ä¼˜å¹³è¡¡ã€‚

| æ¨¡å‹æä¾›å•† | æ”¯æŒæ¨¡å‹ | ç‰¹è‰²åŠŸèƒ½ |
|---------|--------|--------|
| **é˜¿é‡Œç™¾ç‚¼** | qwen-turbo, qwen-plus, qwen-max | ä¸­æ–‡ä¼˜åŒ–ï¼Œæˆæœ¬æ•ˆç›Šé«˜ï¼Œå“åº”å¿«é€Ÿ |
| **DeepSeek** | deepseek-chat, deepseek-coder | å·¥å…·è°ƒç”¨ï¼Œæ•°å­¦è®¡ç®—ï¼Œä»£ç åˆ†æ |
| **Google AI** | gemini-2.0-flash, gemini-1.5-pro | å¤šæ¨¡æ€æ”¯æŒï¼Œæ¨ç†èƒ½åŠ›å¼º |
| **OpenAI** | GPT-4o, GPT-4o-mini, GPT-3.5-turbo | é€šç”¨èƒ½åŠ›å¼ºï¼Œç”Ÿæ€å®Œå–„ |
| **Anthropic** | Claude-3-Opus, Claude-3-Sonnet | å®‰å…¨æ€§é«˜ï¼Œé•¿æ–‡æœ¬å¤„ç† |

### æ¨¡å‹åˆå§‹åŒ–ä¸é…ç½®

```python
# tradingagents/graph/trading_graph.py
def __init__(self, selected_analysts=["market", "social", "news", "fundamentals"], debug=False, config: Dict[str, Any] = None):
    # ... å…¶ä»–åˆå§‹åŒ–ä»£ç  ...
    
    # åˆå§‹åŒ–LLM
    if self.config["llm_provider"].lower() == "openai" or self.config["llm_provider"] == "ollama" or self.config["llm_provider"] == "openrouter":
        self.deep_thinking_llm = ChatOpenAI(model=self.config["deep_think_llm"], base_url=self.config["backend_url"])
        self.quick_thinking_llm = ChatOpenAI(model=self.config["quick_think_llm"], base_url=self.config["backend_url"])
    elif self.config["llm_provider"].lower() == "anthropic":
        self.deep_thinking_llm = ChatAnthropic(model=self.config["deep_think_llm"], base_url=self.config["backend_url"])
        self.quick_thinking_llm = ChatAnthropic(model=self.config["quick_think_llm"], base_url=self.config["backend_url"])
    elif self.config["llm_provider"].lower() == "google":
        google_api_key = os.getenv('GOOGLE_API_KEY')
        self.deep_thinking_llm = ChatGoogleGenerativeAI(
            model=self.config["deep_think_llm"],
            google_api_key=google_api_key,
            temperature=0.1,
            max_tokens=2000
        )
        self.quick_thinking_llm = ChatGoogleGenerativeAI(
            model=self.config["quick_think_llm"],
            google_api_key=google_api_key,
            temperature=0.1,
            max_tokens=2000
        )
    elif (self.config["llm_provider"].lower() == "dashscope" or
          self.config["llm_provider"].lower() == "alibaba" or
          "dashscope" in self.config["llm_provider"].lower() or
          "é˜¿é‡Œç™¾ç‚¼" in self.config["llm_provider"]):
        # ä½¿ç”¨ OpenAI å…¼å®¹é€‚é…å™¨ï¼Œæ”¯æŒåŸç”Ÿ Function Calling
        print("ğŸ”§ ä½¿ç”¨é˜¿é‡Œç™¾ç‚¼ OpenAI å…¼å®¹é€‚é…å™¨ (æ”¯æŒåŸç”Ÿå·¥å…·è°ƒç”¨)")
        self.deep_thinking_llm = ChatDashScopeOpenAI(
            model=self.config["deep_think_llm"],
            temperature=0.1,
            max_tokens=2000
        )
        self.quick_thinking_llm = ChatDashScopeOpenAI(
            model=self.config["quick_think_llm"],
            temperature=0.1,
            max_tokens=2000
        )
    elif (self.config["llm_provider"].lower() == "deepseek" or
          "deepseek" in self.config["llm_provider"].lower()):
        # DeepSeek V3é…ç½® - ä½¿ç”¨æ”¯æŒtokenç»Ÿè®¡çš„é€‚é…å™¨
        from tradingagents.llm_adapters.deepseek_adapter import ChatDeepSeek

        deepseek_api_key = os.getenv('DEEPSEEK_API_KEY')
        if not deepseek_api_key:
            raise ValueError("ä½¿ç”¨DeepSeekéœ€è¦è®¾ç½®DEEPSEEK_API_KEYç¯å¢ƒå˜é‡")

        deepseek_base_url = os.getenv('DEEPSEEK_BASE_URL', 'https://api.deepseek.com')

        # ä½¿ç”¨æ”¯æŒtokenç»Ÿè®¡çš„DeepSeeké€‚é…å™¨
        self.deep_thinking_llm = ChatDeepSeek(
            model=self.config["deep_think_llm"],
            api_key=deepseek_api_key,
            base_url=deepseek_base_url,
            temperature=0.1,
            max_tokens=2000
        )
        self.quick_thinking_llm = ChatDeepSeek(
            model=self.config["quick_think_llm"],
            api_key=deepseek_api_key,
            base_url=deepseek_base_url,
            temperature=0.1,
            max_tokens=2000
            )
```

**Section sources**
- [tradingagents/graph/trading_graph.py](file://tradingagents/graph/trading_graph.py#L32-L325)
- [tradingagents/llm_adapters/dashscope_adapter.py](file://tradingagents/llm_adapters/dashscope_adapter.py)
- [tradingagents/llm_adapters/deepseek_adapter.py](file://tradingagents/llm_adapters/deepseek_adapter.py)

## æ•°æ®æºé›†æˆ

### æ”¯æŒçš„æ•°æ®æº

TradingAgents-CN é›†æˆäº†å¤šç§é‡‘èæ•°æ®æºï¼Œç¡®ä¿æ•°æ®çš„å…¨é¢æ€§å’Œå¯é æ€§ã€‚

| æ•°æ®ç±»å‹ | æ•°æ®æº | è¦†ç›–èŒƒå›´ |
|---------|--------|--------|
| **Aè‚¡å®æ—¶æ•°æ®** | é€šè¾¾ä¿¡API, AkShare | æ²ªæ·±ä¸¤å¸‚ï¼Œå®æ—¶è¡Œæƒ…ï¼Œå†å²æ•°æ® |
| **ç¾è‚¡æ•°æ®** | FinnHub, Yahoo Finance | NYSE, NASDAQï¼Œå®æ—¶è¡Œæƒ… |
| **æ–°é—»æ•°æ®** | Google News, è´¢ç»æ–°é—» | å®æ—¶æ–°é—»ï¼Œå¤šè¯­è¨€æ”¯æŒ |
| **ç¤¾äº¤æƒ…ç»ª** | Reddit, Twitter API | æƒ…ç»ªæŒ‡æ•°ï¼Œçƒ­åº¦åˆ†æ |
| **æŠ€æœ¯æŒ‡æ ‡** | è‡ªç ”ç®—æ³• | MA, RSI, MACD, å¸ƒæ—å¸¦ç­‰ |
| **åŸºæœ¬é¢æ•°æ®** | Tushare, è´¢åŠ¡API | è´¢æŠ¥æ•°æ®ï¼Œä¼°å€¼æŒ‡æ ‡ |

### ç»Ÿä¸€æ•°æ®æºç®¡ç†

ç³»ç»Ÿé‡‡ç”¨æ•°æ®æºç®¡ç†å™¨æ¨¡å¼ï¼Œå®ç°å¤šæ•°æ®æºçš„ç»Ÿä¸€ç®¡ç†å’Œæ™ºèƒ½é™çº§ã€‚

```mermaid
classDiagram
class DataSourceManager {
+get_current_source()
+set_current_source()
+get_data_adapter()
+get_stock_data()
+get_stock_info()
+_try_fallback_sources()
}
class ChinaDataSource {
<<enumeration>>
TUSHARE
AKSHARE
BAOSTOCK
TDX
}
class TushareDataAdapter {
+get_stock_data()
+get_stock_info()
+get_fundamentals()
}
class AkShareProvider {
+get_stock_data()
+get_stock_info()
}
class BaostockProvider {
+get_stock_data()
+get_stock_info()
}
class TdxProvider {
+get_stock_data()
+get_stock_info()
}
DataSourceManager --> ChinaDataSource : "ä½¿ç”¨"
DataSourceManager --> TushareDataAdapter : "ä½¿ç”¨"
DataSourceManager --> AkShareProvider : "ä½¿ç”¨"
DataSourceManager --> BaostockProvider : "ä½¿ç”¨"
DataSourceManager --> TdxProvider : "ä½¿ç”¨"
class get_china_stock_data_unified {
<<function>>
+get_china_stock_data_unified()
}
class get_china_stock_info_unified {
<<function>>
+get_china_stock_info_unified()
}
get_china_stock_data_unified --> DataSourceManager : "è°ƒç”¨"
get_china_stock_info_unified --> DataSourceManager : "è°ƒç”¨"
```

**Diagram sources**
- [tradingagents/dataflows/data_source_manager.py](file://tradingagents/dataflows/data_source_manager.py#L21-L310)
- [tradingagents/dataflows/interface.py](file://tradingagents/dataflows/interface.py#L1224-L1251)
- [tradingagents/dataflows/tushare_adapter.py](file://tradingagents/dataflows/tushare_adapter.py)

### æ•°æ®è·å–æµç¨‹

```mermaid
flowchart TD
Start([å¼€å§‹]) --> CheckConfig["æ£€æŸ¥é…ç½®"]
CheckConfig --> ConfigValid{"é…ç½®æœ‰æ•ˆ?"}
ConfigValid --> |å¦| ReturnError["è¿”å›é”™è¯¯"]
ConfigValid --> |æ˜¯| GetManager["è·å–æ•°æ®æºç®¡ç†å™¨"]
GetManager --> GetCurrent["è·å–å½“å‰æ•°æ®æº"]
GetCurrent --> CheckAvailable{"æ•°æ®æºå¯ç”¨?"}
CheckAvailable --> |å¦| TryFallback["å°è¯•å¤‡ç”¨æ•°æ®æº"]
CheckAvailable --> |æ˜¯| GetData["è·å–è‚¡ç¥¨æ•°æ®"]
TryFallback --> FallbackSuccess{"å¤‡ç”¨æˆåŠŸ?"}
FallbackSuccess --> |å¦| ReturnError
FallbackSuccess --> |æ˜¯| GetData
GetData --> DataValid{"æ•°æ®æœ‰æ•ˆ?"}
DataValid --> |å¦| ReturnError
DataValid --> |æ˜¯| FormatData["æ ¼å¼åŒ–æ•°æ®"]
FormatData --> AddMetadata["æ·»åŠ å…ƒæ•°æ®"]
AddMetadata --> ReturnResult["è¿”å›ç»“æœ"]
ReturnError --> End([ç»“æŸ])
ReturnResult --> End
```

**Diagram sources**
- [tradingagents/dataflows/data_source_manager.py](file://tradingagents/dataflows/data_source_manager.py#L21-L310)
- [tradingagents/dataflows/interface.py](file://tradingagents/dataflows/interface.py#L1224-L1251)

**Section sources**
- [tradingagents/dataflows/data_source_manager.py](file://tradingagents/dataflows/data_source_manager.py#L21-L310)
- [tradingagents/dataflows/interface.py](file://tradingagents/dataflows/interface.py#L1224-L1251)
- [tradingagents/dataflows/tushare_adapter.py](file://tradingagents/dataflows/tushare_adapter.py)
- [tradingagents/dataflows/tushare_utils.py](file://tradingagents/dataflows/tushare_utils.py)

## å­˜å‚¨ä¸ç¼“å­˜æœºåˆ¶

### å­˜å‚¨ç³»ç»Ÿæ¶æ„

TradingAgents-CN é‡‡ç”¨å¤šå±‚æ¬¡å­˜å‚¨æ¶æ„ï¼Œç¡®ä¿æ•°æ®çš„æŒä¹…åŒ–å’Œè®¿é—®æ€§èƒ½ã€‚

| å­˜å‚¨ç±»å‹ | æŠ€æœ¯æ–¹æ¡ˆ | åŠŸèƒ½ç‰¹æ€§ |
|---------|--------|--------|
| **æŒä¹…åŒ–å­˜å‚¨** | MongoDB 4.4+ | åˆ†æç»“æœï¼Œç”¨æˆ·é…ç½®ï¼Œå†å²æ•°æ® |
| **é«˜é€Ÿç¼“å­˜** | Redis 6.0+ | å®æ—¶æ•°æ®ï¼ŒAPIå“åº”ï¼Œä¼šè¯ç®¡ç† |
| **æ–‡ä»¶å­˜å‚¨** | æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ | æŠ¥å‘Šæ–‡ä»¶ï¼Œæ—¥å¿—æ–‡ä»¶ï¼Œé…ç½®å¤‡ä»½ |
| **æ™ºèƒ½é™çº§** | å¤šå±‚æ•°æ®æº | MongoDB â†’ Redis â†’ æœ¬åœ°æ–‡ä»¶ |

### ç¼“å­˜ç­–ç•¥

ç³»ç»Ÿé‡‡ç”¨æ™ºèƒ½ç¼“å­˜ç­–ç•¥ï¼Œå‡å°‘APIè°ƒç”¨æˆæœ¬ï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚

```mermaid
flowchart LR
subgraph "æ•°æ®è·å–æµç¨‹"
A[Redisç¼“å­˜] --> B{å‘½ä¸­?}
B --> |æ˜¯| C[è¿”å›ç¼“å­˜æ•°æ®]
B --> |å¦| D[MongoDBå­˜å‚¨]
D --> E{å‘½ä¸­?}
E --> |æ˜¯| F[è¿”å›å­˜å‚¨æ•°æ®]
E --> |å¦| G[è°ƒç”¨API]
G --> H[å¤„ç†æ•°æ®]
H --> I[æ›´æ–°ç¼“å­˜]
I --> J[è¿”å›ç»“æœ]
end
```

**Diagram sources**
- [tradingagents/config/database_config.py](file://tradingagents/config/database_config.py)
- [tradingagents/config/mongodb_storage.py](file://tradingagents/config/mongodb_storage.py)

**Section sources**
- [README.md](file://README.md#L1-L1257)
- [tradingagents/config/database_config.py](file://tradingagents/config/database_config.py)

## ç”¨æˆ·ç•Œé¢ä¸äº¤äº’

### Webç•Œé¢åŠŸèƒ½

åŸºäºStreamlitçš„ç°ä»£åŒ–Webç•Œé¢æä¾›ç›´è§‚çš„æ“ä½œä½“éªŒã€‚

| åŠŸèƒ½ç‰¹æ€§ | è¯´æ˜ |
|---------|------|
| **Streamlit Webç•Œé¢** | ç°ä»£åŒ–å“åº”å¼ç•Œé¢ï¼Œæ”¯æŒå®æ—¶äº¤äº’å’Œæ•°æ®å¯è§†åŒ– |
| **ç§»åŠ¨ç«¯é€‚é…** | å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ‰‹æœºå’Œå¹³æ¿è®¾å¤‡è®¿é—® |
| **ä¸»é¢˜å®šåˆ¶** | æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢ï¼Œè‡ªå®šä¹‰é…è‰²æ–¹æ¡ˆ |
| **å¤šè¯­è¨€ç•Œé¢**