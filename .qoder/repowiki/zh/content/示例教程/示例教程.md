# 示例教程

<cite>
**本文档中引用的文件**   
- [simple_analysis_demo.py](file://examples/simple_analysis_demo.py)
- [my_stock_analysis.py](file://examples/my_stock_analysis.py)
- [batch_analysis.py](file://examples/batch_analysis.py)
- [custom_analysis_demo.py](file://examples/custom_analysis_demo.py)
- [demo_deepseek_analysis.py](file://examples/demo_deepseek_analysis.py)
- [cli_demo.py](file://examples/cli_demo.py)
- [tushare_demo.py](file://examples/tushare_demo.py)
- [stock_query_examples.py](file://examples/stock_query_examples.py)
- [demo_news_filtering.py](file://examples/demo_news_filtering.py)
- [config_management_demo.py](file://examples/config_management_demo.py)
- [data_dir_config_demo.py](file://examples/data_dir_config_demo.py)
- [token_tracking_demo.py](file://examples/token_tracking_demo.py)
- [china_market_analyst.py](file://tradingagents/agents/analysts/china_market_analyst.py)
- [fundamentals_analyst.py](file://tradingagents/agents/analysts/fundamentals_analyst.py)
- [news_analyst.py](file://tradingagents/agents/analysts/news_analyst.py)
</cite>

## 目录

1. [简介](#简介)
2. [基础示例](#基础示例)
3. [高级应用示例](#高级应用示例)
4. [实战案例](#实战案例)
5. [配置管理](#配置管理)
6. [数据源配置](#数据源配置)
7. [性能优化](#性能优化)
8. [故障排除](#故障排除)
9. [结论](#结论)

## 简介

本教程旨在通过一系列实际案例帮助用户掌握交易代理系统（TradingAgents-CN）的使用。系统提供了一个强大的AI驱动的金融分析框架，支持多种大模型提供商，包括DeepSeek、阿里百炼和OpenAI等。通过本教程，用户将学习如何进行单只股票的基本面分析、新闻情绪分析等基础操作，以及投资组合优化、跨市场比较分析等高级应用。每个示例都包含详细的步骤说明、配置参数和预期结果解释，并提供可运行的代码片段和配置文件，方便用户复现。

**本文档中引用的文件**   
- [simple_analysis_demo.py](file://examples/simple_analysis_demo.py)
- [demo_deepseek_analysis.py](file://examples/demo_deepseek_analysis.py)

## 基础示例

### 单只股票基本面分析

本示例演示如何对单只股票进行基本面分析。用户可以通过修改股票代码和分析重点来定制分析内容。

```mermaid
flowchart TD
Start([开始]) --> SetStockCode["设置股票代码"]
SetStockCode --> SetAnalysisFocus["设置分析重点"]
SetAnalysisFocus --> CheckAPIKey["检查API密钥"]
CheckAPIKey --> InitializeLLM["初始化大模型"]
InitializeLLM --> BuildPrompt["构建分析提示"]
BuildPrompt --> GenerateAnalysis["生成分析报告"]
GenerateAnalysis --> SaveReport["保存报告"]
SaveReport --> End([结束])
```

**图示来源**
- [my_stock_analysis.py](file://examples/my_stock_analysis.py#L20-L120)

**本节来源**
- [my_stock_analysis.py](file://examples/my_stock_analysis.py#L20-L120)

### 新闻情绪分析

本示例演示如何进行新闻情绪分析，通过过滤和分析相关新闻来评估市场情绪。

```mermaid
flowchart TD
Start([开始]) --> GetNews["获取新闻数据"]
GetNews --> FilterNews["过滤低质量新闻"]
FilterNews --> AnalyzeSentiment["分析新闻情绪"]
AnalyzeSentiment --> GenerateReport["生成情绪分析报告"]
GenerateReport --> SaveResults["保存结果"]
SaveResults --> End([结束])
```

**图示来源**
- [demo_news_filtering.py](file://examples/demo_news_filtering.py#L20-L230)

**本节来源**
- [demo_news_filtering.py](file://examples/demo_news_filtering.py#L20-L230)

## 高级应用示例

### 投资组合优化

本示例演示如何进行投资组合优化，通过批量分析多只股票并生成投资组合建议。

```mermaid
flowchart TD
Start([开始]) --> DefinePortfolio["定义投资组合"]
DefinePortfolio --> BatchAnalysis["批量分析股票"]
BatchAnalysis --> GenerateSummary["生成汇总报告"]
GenerateSummary --> PortfolioRecommendation["生成投资组合建议"]
PortfolioRecommendation --> SaveResults["保存结果"]
SaveResults --> End([结束])
```

**图示来源**
- [batch_analysis.py](file://examples/batch_analysis.py#L20-L170)

**本节来源**
- [batch_analysis.py](file://examples/batch_analysis.py#L20-L170)

### 跨市场比较分析

本示例演示如何进行跨市场比较分析，对比不同市场的股票表现。

```mermaid
flowchart TD
Start([开始]) --> SelectMarkets["选择分析市场"]
SelectMarkets --> GetMarketData["获取各市场数据"]
GetMarketData --> ComparePerformance["比较市场表现"]
ComparePerformance --> IdentifyTrends["识别市场趋势"]
IdentifyTrends --> GenerateReport["生成比较分析报告"]
GenerateReport --> SaveResults["保存结果"]
SaveResults --> End([结束])
```

**图示来源**
- [custom_analysis_demo.py](file://examples/custom_analysis_demo.py#L20-L280)

**本节来源**
- [custom_analysis_demo.py](file://examples/custom_analysis_demo.py#L20-L280)

## 实战案例

### 模拟真实投资决策场景

本实战案例模拟一个完整的投资决策流程，从数据获取到最终决策。

```mermaid
flowchart TD
Start([开始]) --> DataCollection["数据收集"]
DataCollection --> FundamentalAnalysis["基本面分析"]
FundamentalAnalysis --> TechnicalAnalysis["技术面分析"]
TechnicalAnalysis --> SentimentAnalysis["情绪分析"]
SentimentAnalysis --> RiskAssessment["风险评估"]
RiskAssessment --> InvestmentDecision["投资决策"]
InvestmentDecision --> ExecuteTrade["执行交易"]
ExecuteTrade --> MonitorPerformance["监控表现"]
MonitorPerformance --> AdjustStrategy["调整策略"]
AdjustStrategy --> End([结束])
```

**图示来源**
- [custom_analysis_demo.py](file://examples/custom_analysis_demo.py#L20-L280)
- [batch_analysis.py](file://examples/batch_analysis.py#L20-L170)

**本节来源**
- [custom_analysis_demo.py](file://examples/custom_analysis_demo.py#L20-L280)
- [batch_analysis.py](file://examples/batch_analysis.py#L20-L170)

## 配置管理

### 模型管理

本示例演示如何管理不同大模型的配置。

```mermaid
flowchart TD
Start([开始]) --> LoadConfig["加载配置"]
LoadConfig --> GetEnabledModels["获取启用的模型"]
GetEnabledModels --> DisplayModels["显示模型配置"]
DisplayModels --> ModifyConfig["修改模型配置"]
ModifyConfig --> SaveConfig["保存配置"]
SaveConfig --> End([结束])
```

**图示来源**
- [config_management_demo.py](file://examples/config_management_demo.py#L20-L260)

**本节来源**
- [config_management_demo.py](file://examples/config_management_demo.py#L20-L260)

### 成本跟踪

本示例演示如何跟踪API使用成本。

```mermaid
flowchart TD
Start([开始]) --> TrackUsage["跟踪使用情况"]
TrackUsage --> CalculateCost["计算使用成本"]
CalculateCost --> DisplayStatistics["显示使用统计"]
DisplayStatistics --> SetAlerts["设置成本警告"]
SetAlerts --> OptimizeCost["优化成本"]
OptimizeCost --> End([结束])
```

**图示来源**
- [token_tracking_demo.py](file://examples/token_tracking_demo.py#L20-L280)

**本节来源**
- [token_tracking_demo.py](file://examples/token_tracking_demo.py#L20-L280)

## 数据源配置

### Tushare数据源配置

本示例演示如何配置和使用Tushare数据源。

```mermaid
flowchart TD
Start([开始]) --> CheckEnvironment["检查环境配置"]
CheckEnvironment --> ConnectTushare["连接Tushare"]
ConnectTushare --> GetStockInfo["获取股票信息"]
GetStockInfo --> GetHistoricalData["获取历史数据"]
GetHistoricalData --> SearchStocks["搜索股票"]
SearchStocks --> BatchOperations["批量操作"]
BatchOperations --> CachePerformance["演示缓存性能"]
CachePerformance --> End([结束])
```

**图示来源**
- [tushare_demo.py](file://examples/tushare_demo.py#L20-L295)

**本节来源**
- [tushare_demo.py](file://examples/tushare_demo.py#L20-L295)

### 股票查询配置

本示例演示如何进行股票查询，包括单个股票查询、股票搜索和市场概览。

```mermaid
flowchart TD
Start([开始]) --> CheckServiceStatus["检查服务状态"]
CheckServiceStatus --> SingleStockQuery["单个股票查询"]
SingleStockQuery --> StockSearch["股票搜索"]
StockSearch --> MarketOverview["市场概览"]
MarketOverview --> HistoricalDataQuery["历史数据查询"]
HistoricalDataQuery --> FallbackMechanism["降级机制演示"]
FallbackMechanism --> End([结束])
```

**图示来源**
- [stock_query_examples.py](file://examples/stock_query_examples.py#L20-L250)

**本节来源**
- [stock_query_examples.py](file://examples/stock_query_examples.py#L20-L250)

## 性能优化

### 缓存性能优化

本示例演示如何通过缓存优化系统性能。

```mermaid
flowchart TD
Start([开始]) --> FirstRequest["第一次请求从API"]
FirstRequest --> MeasureTime["测量响应时间"]
MeasureTime --> SecondRequest["第二次请求从缓存"]
SecondRequest --> MeasureTimeAgain["再次测量响应时间"]
MeasureTimeAgain --> ComparePerformance["比较性能"]
ComparePerformance --> DisplaySpeedup["显示加速效果"]
DisplaySpeedup --> End([结束])
```

**图示来源**
- [tushare_demo.py](file://examples/tushare_demo.py#L20-L295)

**本节来源**
- [tushare_demo.py](file://examples/tushare_demo.py#L20-L295)

## 故障排除

### 常见问题解决

本节提供常见问题的解决方案。

```mermaid
flowchart TD
Start([问题]) --> APIKeyError["API密钥错误"]
APIKeyError --> CheckKey["检查密钥是否正确复制"]
CheckKey --> VerifyService["确认已开通相应服务"]
VerifyService --> End1([解决])
Start --> NetworkError["网络连接问题"]
NetworkError --> CheckConnection["检查网络连接"]
NetworkConnection --> UseProxy["考虑使用代理"]
UseProxy --> End2([解决])
Start --> DependencyError["依赖包问题"]
DependencyError --> InstallDependencies["确保已安装所有依赖"]
InstallDependencies --> ActivateEnvironment["检查虚拟环境是否激活"]
ActivateEnvironment --> End3([解决])
```

**图示来源**
- [simple_analysis_demo.py](file://examples/simple_analysis_demo.py#L20-L215)

**本节来源**
- [simple_analysis_demo.py](file://examples/simple_analysis_demo.py#L20-L215)

## 结论

本教程通过一系列实际案例，全面介绍了交易代理系统（TradingAgents-CN）的使用方法。从基础的单只股票分析到高级的投资组合优化，再到完整的实战案例，用户可以逐步掌握系统的各项功能。通过合理的配置管理和性能优化，用户可以充分利用系统的强大功能，提高投资分析的效率和准确性。希望本教程能帮助用户更好地使用该系统，实现更智能的投资决策。

**本节来源**
- [simple_analysis_demo.py](file://examples/simple_analysis_demo.py#L20-L215)
- [demo_deepseek_analysis.py](file://examples/demo_deepseek_analysis.py#L20-L300)