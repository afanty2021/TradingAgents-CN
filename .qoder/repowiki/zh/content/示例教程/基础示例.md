# åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [examples/README.md](file://examples/README.md)
- [examples/simple_analysis_demo.py](file://examples/simple_analysis_demo.py)
- [examples/demo_deepseek_simple.py](file://examples/demo_deepseek_simple.py)
- [examples/demo_deepseek_analysis.py](file://examples/demo_deepseek_analysis.py)
- [examples/dashscope_examples/demo_dashscope_simple.py](file://examples/dashscope_examples/demo_dashscope_simple.py)
- [examples/dashscope_examples/demo_dashscope_chinese.py](file://examples/dashscope_examples/demo_dashscope_chinese.py)
- [examples/demo_news_filtering.py](file://examples/demo_news_filtering.py)
- [examples/my_stock_analysis.py](file://examples/my_stock_analysis.py)
- [examples/stock_query_examples.py](file://examples/stock_query_examples.py)
- [cli/main.py](file://cli/main.py)
- [tradingagents/default_config.py](file://tradingagents/default_config.py)
- [examples/config_management_demo.py](file://examples/config_management_demo.py)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
3. [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
4. [å¿«é€Ÿå¼€å§‹ç¤ºä¾‹](#å¿«é€Ÿå¼€å§‹ç¤ºä¾‹)
5. [å•åªè‚¡ç¥¨åŸºæœ¬é¢åˆ†æ](#å•åªè‚¡ç¥¨åŸºæœ¬é¢åˆ†æ)
6. [ä¸åŒLLMæä¾›å•†ä½¿ç”¨ç¤ºä¾‹](#ä¸åŒllmæä¾›å•†ä½¿ç”¨ç¤ºä¾‹)
7. [æ–°é—»æƒ…ç»ªåˆ†æ](#æ–°é—»æƒ…ç»ªåˆ†æ)
8. [è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢](#è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢)
9. [CLIå‘½ä»¤è¡Œç•Œé¢](#cliå‘½ä»¤è¡Œç•Œé¢)
10. [é…ç½®ç®¡ç†](#é…ç½®ç®¡ç†)
11. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
12. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

## ç®€ä»‹

TradingAgents-CNæ˜¯ä¸€ä¸ªåŸºäºå¤šæ™ºèƒ½ä½“å¤§è¯­è¨€æ¨¡å‹çš„é‡‘èäº¤æ˜“æ¡†æ¶ï¼Œæä¾›äº†å¼ºå¤§çš„è‚¡ç¥¨åˆ†æå’ŒæŠ•èµ„å†³ç­–æ”¯æŒåŠŸèƒ½ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©æ–°ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹ç³»ç»Ÿï¼ŒæŒæ¡åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•å’Œæ ¸å¿ƒåŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šå¤šä¸ªä¸“ä¸šæ™ºèƒ½ä½“ååŒå®Œæˆå¤æ‚çš„è‚¡ç¥¨åˆ†æä»»åŠ¡
- **å¤šLLMæ”¯æŒ**ï¼šæ”¯æŒDeepSeekã€é˜¿é‡Œç™¾ç‚¼ã€OpenAIç­‰å¤šç§å¤§è¯­è¨€æ¨¡å‹
- **å®æ—¶æ•°æ®åˆ†æ**ï¼šé›†æˆå®æ—¶è‚¡ç¥¨æ•°æ®å’Œæ–°é—»ä¿¡æ¯
- **æˆæœ¬æ§åˆ¶**ï¼šæä¾›Tokenè·Ÿè¸ªå’Œæˆæœ¬ä¼°ç®—åŠŸèƒ½
- **ä¸­æ–‡ä¼˜åŒ–**ï¼šé’ˆå¯¹ä¸­æ–‡ç”¨æˆ·çš„æ·±åº¦ä¼˜åŒ–

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```mermaid
graph TB
subgraph "ç”¨æˆ·ç•Œé¢å±‚"
CLI[å‘½ä»¤è¡Œç•Œé¢]
WEB[Webç•Œé¢]
API[APIæ¥å£]
end
subgraph "æ ¸å¿ƒåˆ†æå¼•æ“"
TA[TradingAgentsæ ¸å¿ƒ]
AG[åˆ†æå›¾è°±]
TM[äº¤æ˜“å›¾è°±]
end
subgraph "æ™ºèƒ½ä½“å›¢é˜Ÿ"
AA[å¸‚åœºåˆ†æå¸ˆ]
NA[æ–°é—»åˆ†æå¸ˆ]
FA[åŸºæœ¬é¢åˆ†æå¸ˆ]
RA[ç ”ç©¶å‘˜å›¢é˜Ÿ]
TR[äº¤æ˜“å‘˜]
end
subgraph "æ•°æ®æº"
FS[é‡‘èæ•°æ®API]
NS[æ–°é—»æ•°æ®API]
DS[è‚¡ç¥¨æ•°æ®API]
CS[ç¼“å­˜ç³»ç»Ÿ]
end
subgraph "LLMæä¾›å•†"
DS_LL[DeepSeek]
AS_LL[é˜¿é‡Œç™¾ç‚¼]
OS_LL[OpenAI]
GS_LL[Google AI]
end
CLI --> TA
WEB --> TA
API --> TA
TA --> AG
TA --> TM
AG --> AA
AG --> NA
AG --> FA
TM --> RA
TM --> TR
AA --> FS
NA --> NS
FA --> DS
RA --> CS
AA --> DS_LL
NA --> AS_LL
FA --> OS_LL
RA --> GS_LL
TR --> DS_LL
```

**å›¾è¡¨æ¥æº**
- [cli/main.py](file://cli/main.py#L1-L100)
- [tradingagents/default_config.py](file://tradingagents/default_config.py#L1-L28)

## ç¯å¢ƒé…ç½®

### APIå¯†é’¥é…ç½®

ç³»ç»Ÿæ”¯æŒå¤šä¸ªLLMæä¾›å•†ï¼Œæ¯ä¸ªéƒ½éœ€è¦é…ç½®ç›¸åº”çš„APIå¯†é’¥ï¼š

#### 1. é˜¿é‡Œç™¾ç‚¼ (æ¨èæ–°æ‰‹)
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export DASHSCOPE_API_KEY=your_dashscope_api_key
export FINNHUB_API_KEY=your_finnhub_api_key
```

#### 2. DeepSeek V3 (é«˜æ€§ä»·æ¯”)
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export DEEPSEEK_API_KEY=sk-your_deepseek_api_key
export FINNHUB_API_KEY=your_finnhub_api_key
```

#### 3. OpenAI (åŠŸèƒ½å¼ºå¤§)
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY=your_openai_api_key
export FINNHUB_API_KEY=your_finnhub_api_key
```

### é…ç½®æ–‡ä»¶è®¾ç½®

åˆ›å»ºæˆ–ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ï¼š

```bash
# LLMæä¾›å•†é…ç½®
DASHSCOPE_API_KEY=your_dashscope_key
DEEPSEEK_API_KEY=your_deepseek_key
OPENAI_API_KEY=your_openai_key

# é‡‘èæ•°æ®API
FINNHUB_API_KEY=your_finnhub_key

# æ•°æ®ç›®å½•é…ç½®
TRADINGAGENTS_DATA_DIR=./data
TRADINGAGENTS_RESULTS_DIR=./results

# æ—¥å¿—é…ç½®
TRADINGAGENTS_LOG_LEVEL=INFO
```

**ç« èŠ‚æ¥æº**
- [examples/README.md](file://examples/README.md#L1-L100)
- [examples/config_management_demo.py](file://examples/config_management_demo.py#L1-L50)

## å¿«é€Ÿå¼€å§‹ç¤ºä¾‹

### åŸºç¡€åˆ†ææ¼”ç¤º

æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼æ˜¯è¿è¡ŒåŸºç¡€åˆ†ææ¼”ç¤ºï¼š

```bash
# è¿è¡Œç®€å•åˆ†ææ¼”ç¤º
python examples/simple_analysis_demo.py
```

è¯¥æ¼”ç¤ºå°†å±•ç¤ºï¼š
- æ”¯æŒçš„åˆ†æç±»å‹å’Œé€‚ç”¨åœºæ™¯
- ä¸åŒæ¨¡å‹çš„ç‰¹ç‚¹å¯¹æ¯”
- æŠ•èµ„åˆ†æå·¥ä½œæµç¨‹
- å®ç”¨çš„æŠ•èµ„æŠ€å·§å’Œå»ºè®®

### æ·±åº¦åˆ†ææ¼”ç¤º

å¯¹äºå¸Œæœ›ä½“éªŒå®Œæ•´åŠŸèƒ½çš„ç”¨æˆ·ï¼š

```bash
# DeepSeek V3å®Œæ•´åˆ†ææ¼”ç¤º
python examples/demo_deepseek_analysis.py

# é˜¿é‡Œç™¾ç‚¼ä¸­æ–‡ä¼˜åŒ–æ¼”ç¤º
python examples/dashscope_examples/demo_dashscope_chinese.py
```

**ç« èŠ‚æ¥æº**
- [examples/simple_analysis_demo.py](file://examples/simple_analysis_demo.py#L1-L100)
- [examples/demo_deepseek_analysis.py](file://examples/demo_deepseek_analysis.py#L1-L100)

## å•åªè‚¡ç¥¨åŸºæœ¬é¢åˆ†æ

### å®Œæ•´åˆ†ææµç¨‹

ä»¥ä¸‹æ˜¯ä½¿ç”¨ä¸åŒLLMæä¾›å•†è¿›è¡Œå•åªè‚¡ç¥¨åŸºæœ¬é¢åˆ†æçš„å®Œæ•´æµç¨‹ï¼š

#### 1. ä½¿ç”¨DeepSeek V3è¿›è¡Œåˆ†æ

```python
# åŸºæœ¬åˆ†æç¤ºä¾‹
from tradingagents.llm_adapters.deepseek_direct_adapter import create_deepseek_direct_adapter

# åˆ›å»ºDeepSeeké€‚é…å™¨
adapter = create_deepseek_direct_adapter(
    model="deepseek-chat",
    temperature=0.1,
    max_tokens=1000
)

# æ‰§è¡Œåˆ†æ
query = """
è¯·å…¨é¢åˆ†ææ‹›å•†é“¶è¡Œ(600036)çš„æŠ•èµ„ä»·å€¼ï¼š
1. è´¢åŠ¡çŠ¶å†µåˆ†æ
2. ç›ˆåˆ©èƒ½åŠ›è¯„ä¼°
3. è¡Œä¸šåœ°ä½åˆ†æ
4. é£é™©å› ç´ è¯†åˆ«
5. æŠ•èµ„å»ºè®®
"""

response = adapter.invoke(query)
print(response)
```

#### 2. ä½¿ç”¨é˜¿é‡Œç™¾ç‚¼è¿›è¡Œä¸­æ–‡åˆ†æ

```python
from tradingagents.llm_adapters import ChatDashScope
from langchain_core.messages import HumanMessage, SystemMessage

# åˆ›å»ºé˜¿é‡Œç™¾ç‚¼æ¨¡å‹
llm = ChatDashScope(
    model="qwen-plus-latest",
    temperature=0.1,
    max_tokens=3000
)

# æ„å»ºä¸­æ–‡åˆ†ææç¤º
system_prompt = """
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è‚¡ç¥¨åˆ†æå¸ˆï¼Œå…·æœ‰ä¸°å¯Œçš„é‡‘èå¸‚åœºç»éªŒã€‚
è¯·ç”¨ä¸­æ–‡è¿›è¡Œåˆ†æï¼Œç¡®ä¿å†…å®¹ä¸“ä¸šã€å®¢è§‚ã€æ˜“æ‡‚ã€‚
"""

user_prompt = """
è¯·å¯¹æ‹›å•†é“¶è¡Œ(600036)è¿›è¡Œå…¨é¢çš„è‚¡ç¥¨åˆ†æï¼ŒåŒ…æ‹¬ï¼š
1. è´¢åŠ¡æŒ‡æ ‡åˆ†æ
2. ä¸šåŠ¡æ¨¡å¼è¯„ä¼°
3. å¸‚åœºç«äº‰åŠ›
4. é£é™©è¯„ä¼°
5. æŠ•èµ„å»ºè®®
"""

messages = [
    SystemMessage(content=system_prompt),
    HumanMessage(content=user_prompt)
]

response = llm.invoke(messages)
print(response.content)
```

### è¾“å…¥å‚æ•°é…ç½®

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| model | str | "deepseek-chat" | ä½¿ç”¨çš„LLMæ¨¡å‹ |
| temperature | float | 0.1 | æ§åˆ¶è¾“å‡ºéšæœºæ€§ï¼Œ0è¡¨ç¤ºç¡®å®šæ€§è¾“å‡º |
| max_tokens | int | 1000 | æœ€å¤§ç”ŸæˆTokenæ•° |
| timeout | int | 30 | è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ |

### æ‰§è¡Œå‘½ä»¤

```bash
# ç›´æ¥è¿è¡Œåˆ†æè„šæœ¬
python examples/demo_deepseek_analysis.py

# è‡ªå®šä¹‰è‚¡ç¥¨åˆ†æ
python examples/my_stock_analysis.py
```

### ç»“æœè§£è¯»

åˆ†æç»“æœé€šå¸¸åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

1. **è´¢åŠ¡åˆ†æ**ï¼šèµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€ç°é‡‘æµé‡è¡¨åˆ†æ
2. **ä¸šåŠ¡åˆ†æ**ï¼šæ ¸å¿ƒä¸šåŠ¡ã€ç«äº‰ä¼˜åŠ¿ã€å¸‚åœºåœ°ä½
3. **ä¼°å€¼åˆ†æ**ï¼šå¸‚ç›ˆç‡ã€å¸‚å‡€ç‡ã€PEGç­‰æŒ‡æ ‡
4. **é£é™©è¯„ä¼°**ï¼šç»è¥é£é™©ã€å¸‚åœºé£é™©ã€æ”¿ç­–é£é™©
5. **æŠ•èµ„å»ºè®®**ï¼šä¹°å…¥/æŒæœ‰/å–å‡ºå»ºè®®åŠç›®æ ‡ä»·ä½

**ç« èŠ‚æ¥æº**
- [examples/demo_deepseek_analysis.py](file://examples/demo_deepseek_analysis.py#L50-L150)
- [examples/my_stock_analysis.py](file://examples/my_stock_analysis.py#L1-L124)

## ä¸åŒLLMæä¾›å•†ä½¿ç”¨ç¤ºä¾‹

### DeepSeek V3ï¼ˆé¢„è§ˆç‰ˆæ¨èï¼‰

DeepSeek V3æ˜¯æ–°é›†æˆçš„é«˜æ€§ä»·æ¯”å¤§æ¨¡å‹ï¼š

```python
# DeepSeek V3ç®€å•å¯¹è¯ç¤ºä¾‹
from tradingagents.llm_adapters.deepseek_direct_adapter import create_deepseek_direct_adapter

# åˆ›å»ºé€‚é…å™¨
adapter = create_deepseek_direct_adapter(
    model="deepseek-chat",
    temperature=0.1,
    max_tokens=500
)

# æ‰§è¡Œç®€å•å¯¹è¯
response = adapter.invoke("è¯·è§£é‡Šä»€ä¹ˆæ˜¯è‚¡ç¥¨æŠ•èµ„")
print(response)
```

**ç‰¹ç‚¹**ï¼š
- ğŸ’° **è¶…ä½æˆæœ¬**ï¼šç›¸æ¯”GPT-4èŠ‚çœ90%+è´¹ç”¨
- ğŸ‡¨ğŸ‡³ **ä¸­æ–‡ä¼˜åŒ–**ï¼šä¼˜ç§€çš„ä¸­æ–‡ç†è§£å’Œç”Ÿæˆèƒ½åŠ›
- ğŸ“Š **ä¸“ä¸šåˆ†æ**ï¼šé€‚åˆé‡‘èæŠ•èµ„åˆ†æåœºæ™¯
- ğŸ”§ **å®Œæ•´é›†æˆ**ï¼šæ”¯æŒTokenç»Ÿè®¡å’Œæˆæœ¬è·Ÿè¸ª

### é˜¿é‡Œç™¾ç‚¼ï¼ˆä¸­æ–‡ä¼˜åŒ–ï¼‰

é˜¿é‡Œç™¾ç‚¼æ˜¯å›½å†…ä¼˜ç§€çš„å›½äº§å¤§æ¨¡å‹ï¼š

```python
# é˜¿é‡Œç™¾ç‚¼ä¸­æ–‡åˆ†æç¤ºä¾‹
from tradingagents.llm_adapters import ChatDashScope

# åˆ›å»ºæ¨¡å‹å®ä¾‹
llm = ChatDashScope(
    model="qwen-plus-latest",
    temperature=0.1,
    max_tokens=3000
)

# ä½¿ç”¨ä¸­æ–‡è¿›è¡Œåˆ†æ
messages = [
    SystemMessage(content="è¯·ç”¨ä¸­æ–‡åˆ†æè‚¡ç¥¨æŠ•èµ„"),
    HumanMessage(content="è¯·åˆ†æè…¾è®¯æ§è‚¡çš„æŠ•èµ„ä»·å€¼")
]

response = llm.invoke(messages)
print(response.content)
```

**æ¨¡å‹å¯¹æ¯”**ï¼š

| æ¨¡å‹ | ä¼˜åŠ¿ | é€‚ç”¨åœºæ™¯ | ä»·æ ¼ |
|------|------|----------|------|
| qwen-turbo | å“åº”å¿«ï¼Œæˆæœ¬ä½ | å¿«é€ŸæŸ¥è¯¢ | æœ€ä½ |
| qwen-plus | å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬ | æ—¥å¸¸åˆ†æ | ä¸­ç­‰ |
| qwen-max | æœ€é«˜è´¨é‡ | æ·±åº¦åˆ†æ | è¾ƒé«˜ |

### OpenAIï¼ˆåŠŸèƒ½å¼ºå¤§ï¼‰

OpenAIæ¨¡å‹æä¾›æœ€å¼ºçš„åˆ†æèƒ½åŠ›ï¼š

```python
# OpenAIåˆ†æç¤ºä¾‹
from openai import OpenAI

client = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[
        {"role": "system", "content": "ä½ æ˜¯ä¸“ä¸šçš„è‚¡ç¥¨åˆ†æå¸ˆ"},
        {"role": "user", "content": "åˆ†æè‹¹æœå…¬å¸çš„æŠ•èµ„ä»·å€¼"}
    ],
    temperature=0.1,
    max_tokens=1000
)
```

**ç« èŠ‚æ¥æº**
- [examples/demo_deepseek_simple.py](file://examples/demo_deepseek_simple.py#L1-L151)
- [examples/dashscope_examples/demo_dashscope_simple.py](file://examples/dashscope_examples/demo_dashscope_simple.py#L1-L132)

## æ–°é—»æƒ…ç»ªåˆ†æ

### åŸºç¡€æ–°é—»è¿‡æ»¤

ç³»ç»Ÿæä¾›äº†å¼ºå¤§çš„æ–°é—»è¿‡æ»¤åŠŸèƒ½ï¼Œå¯ä»¥è‡ªåŠ¨è¯†åˆ«å’Œè¿‡æ»¤ä½è´¨é‡æ–°é—»ï¼š

```python
# åŸºç¡€æ–°é—»è¿‡æ»¤ç¤ºä¾‹
from tradingagents.utils.news_filter import create_news_filter

# åˆ›å»ºæ‹›å•†é“¶è¡Œæ–°é—»è¿‡æ»¤å™¨
filter = create_news_filter('600036')

# æ¨¡æ‹Ÿæ–°é—»æ•°æ®
mixed_news = pd.DataFrame([
    {
        'æ–°é—»æ ‡é¢˜': 'æ‹›å•†é“¶è¡Œå‘å¸ƒ2024å¹´ç¬¬ä¸‰å­£åº¦è´¢æŠ¥',
        'æ–°é—»å†…å®¹': 'æ‹›å•†é“¶è¡Œä»Šæ—¥å‘å¸ƒç¬¬ä¸‰å­£åº¦è´¢æŠ¥ï¼Œå‡€åˆ©æ¶¦åŒæ¯”å¢é•¿8%'
    },
    {
        'æ–°é—»æ ‡é¢˜': 'ä¸Šè¯180ETFæŒ‡æ•°åŸºé‡‘æŠ•èµ„ç­–ç•¥åˆ†æ',
        'æ–°é—»å†…å®¹': 'ä¸Šè¯180æŒ‡æ•°åŒ…å«æ‹›å•†é“¶è¡Œç­‰180åªå¤§ç›˜è“ç­¹è‚¡'
    }
])

# æ‰§è¡Œè¿‡æ»¤
filtered_news = filter.filter_news(mixed_news, min_score=30)
print(f"è¿‡æ»¤åæ–°é—»æ•°é‡: {len(filtered_news)}")
```

### å¢å¼ºæ–°é—»åˆ†æ

```python
# å¢å¼ºæ–°é—»è¿‡æ»¤ç¤ºä¾‹
from tradingagents.utils.enhanced_news_filter import create_enhanced_news_filter

# åˆ›å»ºå¢å¼ºè¿‡æ»¤å™¨
enhanced_filter = create_enhanced_news_filter(
    '600036',
    use_semantic=True,
    use_local_model=True
)

# æ‰§è¡Œå¢å¼ºè¿‡æ»¤
enhanced_result = enhanced_filter.filter_news_enhanced(news_data, min_score=40)
```

### å®æ—¶æ–°é—»åˆ†æ

```python
# å®æ—¶æ–°é—»è·å–å’Œåˆ†æ
from tradingagents.utils.news_filter_integration import create_filtered_realtime_news_function

# åˆ›å»ºå¢å¼ºç‰ˆå®æ—¶æ–°é—»å‡½æ•°
enhanced_news_func = create_filtered_realtime_news_function()

# è·å–è¿‡æ»¤åçš„å®æ—¶æ–°é—»
result = enhanced_news_func(
    ticker="600036",
    curr_date=datetime.now().strftime("%Y-%m-%d"),
    enable_filter=True,
    min_score=30
)
```

### æ–°é—»åˆ†æå·¥ä½œæµç¨‹

```mermaid
flowchart TD
A[è·å–å®æ—¶æ–°é—»] --> B[æ–°é—»é¢„å¤„ç†]
B --> C[å…³é”®è¯æå–]
C --> D[è¯­ä¹‰åˆ†æ]
D --> E[ç›¸å…³æ€§è¯„åˆ†]
E --> F{è¯„åˆ† > é˜ˆå€¼?}
F --> |æ˜¯| G[é«˜è´¨é‡æ–°é—»]
F --> |å¦| H[ä½è´¨é‡æ–°é—»]
G --> I[æƒ…æ„Ÿåˆ†æ]
I --> J[å¸‚åœºæƒ…ç»ªè¯„ä¼°]
J --> K[æŠ•èµ„å»ºè®®ç”Ÿæˆ]
H --> L[è¿‡æ»¤æ‰æ–°é—»]
```

**å›¾è¡¨æ¥æº**
- [examples/demo_news_filtering.py](file://examples/demo_news_filtering.py#L1-L100)

**ç« èŠ‚æ¥æº**
- [examples/demo_news_filtering.py](file://examples/demo_news_filtering.py#L1-L230)

## è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢

### åŸºç¡€æŸ¥è¯¢åŠŸèƒ½

ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢åŠŸèƒ½ï¼š

```python
# å•ä¸ªè‚¡ç¥¨æŸ¥è¯¢
from tradingagents.api.stock_api import get_stock_info

# æŸ¥è¯¢æ‹›å•†é“¶è¡Œä¿¡æ¯
stock_info = get_stock_info('600036')
print(f"è‚¡ç¥¨åç§°: {stock_info.get('name')}")
print(f"å¸‚åœº: {stock_info.get('market')}")
print(f"ç±»åˆ«: {stock_info.get('category')}")
```

### æ‰¹é‡æŸ¥è¯¢åŠŸèƒ½

```python
# è‚¡ç¥¨æœç´¢åŠŸèƒ½
from tradingagents.api.stock_api import search_stocks

# æœç´¢åŒ…å«"å¹³å®‰"çš„è‚¡ç¥¨
results = search_stocks('å¹³å®‰')
for stock in results[:5]:  # æ˜¾ç¤ºå‰5ä¸ªç»“æœ
    print(f"{stock.get('code')} - {stock.get('name')}")

# å¸‚åœºæ¦‚è§ˆæŸ¥è¯¢
from tradingagents.api.stock_api import get_market_summary

summary = get_market_summary()
print(f"æ€»è‚¡ç¥¨æ•°: {summary.get('total_count')}")
print(f"æ²ªå¸‚è‚¡ç¥¨: {summary.get('shanghai_count')}")
print(f"æ·±å¸‚è‚¡ç¥¨: {summary.get('shenzhen_count')}")
```

### å†å²æ•°æ®æŸ¥è¯¢

```python
# è‚¡ç¥¨å†å²æ•°æ®æŸ¥è¯¢
from tradingagents.api.stock_api import get_stock_data

# è·å–æœ€è¿‘30å¤©çš„æ‹›å•†é“¶è¡Œæ•°æ®
end_date = datetime.now().strftime('%Y-%m-%d')
start_date = (datetime.now() - timedelta(days=30)).strftime('%Y-%m-%d')

data = get_stock_data('600036', start_date, end_date)
print(data[:500])  # æ˜¾ç¤ºå‰500å­—ç¬¦
```

### é™çº§æœºåˆ¶

ç³»ç»Ÿå…·å¤‡å®Œå–„çš„é™çº§æœºåˆ¶ï¼Œç¡®ä¿åœ¨APIä¸å¯ç”¨æ—¶ä»èƒ½æä¾›åŸºæœ¬åŠŸèƒ½ï¼š

```python
# é™çº§æœºåˆ¶æ¼”ç¤º
from tradingagents.api.stock_api import check_service_status

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
status = check_service_status()
print(f"æœåŠ¡å¯ç”¨æ€§: {status.get('service_available')}")
print(f"æ•°æ®åº“çŠ¶æ€: {status.get('mongodb_status')}")
print(f"ç»Ÿä¸€APIçŠ¶æ€: {status.get('unified_api_status')}")
```

**ç« èŠ‚æ¥æº**
- [examples/stock_query_examples.py](file://examples/stock_query_examples.py#L1-L252)

## CLIå‘½ä»¤è¡Œç•Œé¢

### å¯åŠ¨CLIç•Œé¢

```bash
# å¯åŠ¨CLIåˆ†æç•Œé¢
python -m cli.main analyze

# æˆ–è€…
python examples/cli_demo.py
```

### CLIä½¿ç”¨æµç¨‹

CLIç•Œé¢æä¾›äº†å®Œæ•´çš„äº¤äº’å¼åˆ†æä½“éªŒï¼š

```mermaid
sequenceDiagram
participant U as ç”¨æˆ·
participant CLI as CLIç•Œé¢
participant TA as TradingAgents
participant LLM as LLMæä¾›å•†
participant DS as æ•°æ®æº
U->>CLI : å¯åŠ¨åˆ†æ
CLI->>U : é€‰æ‹©å¸‚åœº (ç¾è‚¡/Aè‚¡/æ¸¯è‚¡)
U->>CLI : è¾“å…¥è‚¡ç¥¨ä»£ç 
CLI->>U : é€‰æ‹©åˆ†ææ—¥æœŸ
CLI->>U : é€‰æ‹©åˆ†æå¸ˆå›¢é˜Ÿ
CLI->>U : é€‰æ‹©ç ”ç©¶æ·±åº¦
CLI->>U : é€‰æ‹©LLMæä¾›å•†
CLI->>TA : å‘èµ·åˆ†æè¯·æ±‚
TA->>DS : è·å–è‚¡ç¥¨æ•°æ®
TA->>LLM : å‘é€åˆ†æè¯·æ±‚
LLM->>TA : è¿”å›åˆ†æç»“æœ
TA->>CLI : æ›´æ–°è¿›åº¦æ˜¾ç¤º
CLI->>U : æ˜¾ç¤ºæœ€ç»ˆæŠ¥å‘Š
```

**å›¾è¡¨æ¥æº**
- [cli/main.py](file://cli/main.py#L200-L400)

### CLIç•Œé¢åŠŸèƒ½

1. **å®æ—¶è¿›åº¦æ˜¾ç¤º**ï¼šæ˜¾ç¤ºå„æ™ºèƒ½ä½“çš„å·¥ä½œçŠ¶æ€
2. **æ¶ˆæ¯é¢æ¿**ï¼šæŸ¥çœ‹è¯¦ç»†çš„åˆ†æè¿‡ç¨‹
3. **æŠ¥å‘Šé¢„è§ˆ**ï¼šå®æ—¶é¢„è§ˆç”Ÿæˆçš„åˆ†ææŠ¥å‘Š
4. **å·¥å…·è°ƒç”¨**ï¼šæ˜¾ç¤ºæ™ºèƒ½ä½“ä½¿ç”¨çš„å·¥å…·

### å‘½ä»¤è¡Œå‚æ•°

```bash
# åŸºæœ¬ä½¿ç”¨
python -m cli.main analyze

# æŒ‡å®šè‚¡ç¥¨ä»£ç 
python -m cli.main analyze --ticker AAPL

# æŒ‡å®šå¸‚åœº
python -m cli.main analyze --market us

# æŒ‡å®šæ—¥æœŸ
python -m cli.main analyze --date 2024-05-10
```

**ç« èŠ‚æ¥æº**
- [cli/main.py](file://cli/main.py#L1-L800)

## é…ç½®ç®¡ç†

### æ¨¡å‹é…ç½®

ç³»ç»Ÿæ”¯æŒçµæ´»çš„æ¨¡å‹é…ç½®ç®¡ç†ï¼š

```python
# æ¨¡å‹ç®¡ç†ç¤ºä¾‹
from tradingagents.config.config_manager import config_manager

# æŸ¥çœ‹å½“å‰å¯ç”¨çš„æ¨¡å‹
models = config_manager.get_enabled_models()
for model in models:
    print(f"{model.provider}/{model.model_name}")

# è·å–ç‰¹å®šæ¨¡å‹é…ç½®
qwen_config = config_manager.get_model_by_name("dashscope", "qwen-plus-latest")
print(f"æœ€å¤§Token: {qwen_config.max_tokens}")
print(f"æ¸©åº¦: {qwen_config.temperature}")
```

### æˆæœ¬è·Ÿè¸ª

```python
# æˆæœ¬è®¡ç®—ç¤ºä¾‹
from tradingagents.config.config_manager import token_tracker

# è®°å½•ä½¿ç”¨æƒ…å†µ
record = token_tracker.track_usage(
    provider="dashscope",
    model_name="qwen-plus",
    input_tokens=2000,
    output_tokens=1000,
    session_id="demo_session_001",
    analysis_type="Aè‚¡åˆ†æ"
)

print(f"æœ¬æ¬¡æˆæœ¬: Â¥{record.cost:.4f}")
```

### ä½¿ç”¨ç»Ÿè®¡

```python
# ä½¿ç”¨ç»Ÿè®¡ç¤ºä¾‹
stats = config_manager.get_usage_statistics(30)  # æœ€è¿‘30å¤©
print(f"æ€»è¯·æ±‚æ•°: {stats['total_requests']}")
print(f"æ€»æˆæœ¬: Â¥{stats['total_cost']:.4f}")
print(f"è¾“å…¥Token: {stats['total_input_tokens']:,}")
print(f"è¾“å‡ºToken: {stats['total_output_tokens']:,}")
```

### é…ç½®æ–‡ä»¶ç®¡ç†

```bash
# æŸ¥çœ‹é…ç½®çŠ¶æ€
python examples/config_management_demo.py

# Webç•Œé¢é…ç½®ç®¡ç†
python -m streamlit run web/app.py
```

**ç« èŠ‚æ¥æº**
- [examples/config_management_demo.py](file://examples/config_management_demo.py#L1-L258)

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. APIå¯†é’¥é”™è¯¯

```bash
# æ£€æŸ¥APIå¯†é’¥é…ç½®
export DASHSCOPE_API_KEY=your_key_here
echo $DASHSCOPE_API_KEY

# éªŒè¯å¯†é’¥æœ‰æ•ˆæ€§
curl -H "Authorization: Bearer $DASHSCOPE_API_KEY" \
     https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation
```

#### 2. ç½‘ç»œè¿æ¥é—®é¢˜

```bash
# æµ‹è¯•ç½‘ç»œè¿æ¥
ping api.deepseek.com
ping dashscope.aliyuncs.com

# æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
telnet api.deepseek.com 443
```

#### 3. ä¾èµ–åŒ…é—®é¢˜

```bash
# æ£€æŸ¥ä¾èµ–å®‰è£…
pip list | grep tradingagents

# é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

#### 4. æ•°æ®æºé—®é¢˜

```python
# æ£€æŸ¥æ•°æ®æºçŠ¶æ€
from tradingagents.api.stock_api import check_service_status

status = check_service_status()
print(f"æœåŠ¡çŠ¶æ€: {status}")
```

### è°ƒè¯•æŠ€å·§

1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**ï¼š
```bash
export TRADINGAGENTS_LOG_LEVEL=DEBUG
python examples/simple_analysis_demo.py
```

2. **æ£€æŸ¥ç¯å¢ƒå˜é‡**ï¼š
```python
import os
print("å·²é…ç½®çš„APIå¯†é’¥:")
for key in ['DASHSCOPE_API_KEY', 'DEEPSEEK_API_KEY', 'FINNHUB_API_KEY']:
    value = os.getenv(key, 'æœªé…ç½®')
    print(f"{key}: {value}")
```

3. **æµ‹è¯•åŸºæœ¬åŠŸèƒ½**ï¼š
```python
# æµ‹è¯•LLMè¿æ¥
from tradingagents.llm_adapters import ChatDashScope
llm = ChatDashScope(model="qwen-turbo")
response = llm.invoke(["æµ‹è¯•è¿æ¥"])
print("LLMè¿æ¥æˆåŠŸ")
```

## æœ€ä½³å®è·µ

### 1. æ¨¡å‹é€‰æ‹©æŒ‡å—

| ä½¿ç”¨åœºæ™¯ | æ¨èæ¨¡å‹ | é…ç½®å»ºè®® |
|----------|----------|----------|
| æ—¥å¸¸æŠ•èµ„åˆ†æ | qwen-plus | temperature=0.1, max_tokens=2000 |
| æ·±åº¦ç ”ç©¶æŠ¥å‘Š | qwen-max | temperature=0.0, max_tokens=4000 |
| å¿«é€ŸæŸ¥è¯¢ | qwen-turbo | temperature=0.2, max_tokens=1000 |
| æˆæœ¬æ•æ„Ÿåœºæ™¯ | deepseek-chat | temperature=0.1, max_tokens=1500 |

### 2. åˆ†æç­–ç•¥

1. **å¤šç»´åº¦åˆ†æ**ï¼šç»“åˆæŠ€æœ¯é¢ã€åŸºæœ¬é¢ã€æ–°é—»é¢è¿›è¡Œç»¼åˆåˆ†æ
2. **æ—¶é—´æ¡†æ¶**ï¼šåŒºåˆ†çŸ­æœŸäº¤æ˜“å’Œé•¿æœŸæŠ•èµ„çš„åˆ†æé‡ç‚¹
3. **é£é™©æ§åˆ¶**ï¼šå§‹ç»ˆåŒ…å«é£é™©è¯„ä¼°å’Œåº”å¯¹ç­–ç•¥
4. **æŒç»­è·Ÿè¸ª**ï¼šå®šæœŸæ›´æ–°åˆ†æï¼Œè·Ÿè¸ªæŠ•èµ„ç»„åˆè¡¨ç°

### 3. æˆæœ¬ä¼˜åŒ–

```python
# æˆæœ¬ä¼°ç®—ç¤ºä¾‹
from tradingagents.config.config_manager import config_manager

# ä¼°ç®—ä¸åŒåœºæ™¯çš„æˆæœ¬
scenarios = [
    {"analysts": 1, "depth": "å¿«é€Ÿ", "tokens": 1000},
    {"analysts": 3, "depth": "æ ‡å‡†", "tokens": 2000},
    {"analysts": 5, "depth": "æ·±åº¦", "tokens": 3000}
]

for scenario in scenarios:
    cost = config_manager.calculate_cost(
        "dashscope", "qwen-plus", 
        scenario["tokens"], scenario["tokens"]
    )
    print(f"{scenario['analysts']}åˆ†æå¸ˆÃ—{scenario['depth']}: Â¥{cost:.4f}")
```

### 4. å®‰å…¨å»ºè®®

1. **ä¿æŠ¤APIå¯†é’¥**ï¼šä¸è¦å°†.envæ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
2. **å®šæœŸè½®æ¢å¯†é’¥**ï¼šå®šæœŸæ›´æ¢APIå¯†é’¥ä»¥æé«˜å®‰å…¨æ€§
3. **é™åˆ¶è®¿é—®æƒé™**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­é™åˆ¶å¯¹æ•æ„Ÿé…ç½®çš„è®¿é—®
4. **ç›‘æ§ä½¿ç”¨æƒ…å†µ**ï¼šå®šæœŸæ£€æŸ¥Tokenä½¿ç”¨é‡å’Œæˆæœ¬

### 5. å­¦ä¹ è·¯å¾„

```mermaid
flowchart TD
A[æ–°æ‰‹å…¥é—¨] --> B[åŸºç¡€ç¤ºä¾‹æ¼”ç¤º]
B --> C[ç¯å¢ƒé…ç½®]
C --> D[ç®€å•åˆ†æç»ƒä¹ ]
D --> E[CLIç•Œé¢ä½¿ç”¨]
E --> F[é…ç½®ç®¡ç†]
F --> G[é«˜çº§åŠŸèƒ½æ¢ç´¢]
G --> H[è‡ªå®šä¹‰åˆ†æè„šæœ¬]
H --> I[ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²]
```

é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µï¼Œæ‚¨å¯ä»¥å……åˆ†åˆ©ç”¨TradingAgents-CNçš„å¼ºå¤§åŠŸèƒ½ï¼Œè·å¾—é«˜è´¨é‡çš„æŠ•èµ„åˆ†æç»“æœï¼ŒåŒæ—¶æ§åˆ¶æˆæœ¬å’Œç¡®ä¿å®‰å…¨ã€‚